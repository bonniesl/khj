!function r(a,s,c){function l(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return l(a[t][1][e]||e)},i,i.exports,r,a,s,c)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,n){"use strict";var c=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},l=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var u,d=e("./core/Core"),o=e("./common/EventType"),f=e("./logic/error/Error"),p=e("./common/Net"),h=e("./common/UserData"),i=e("./common/Config"),m=e("./logic/component/marquee"),g=e("./logic/component/Login"),v=i.default.baseUrl;new(function(){function e(){this.init(),window.core=d.default,d.default.eventManager.on(o.default.updateBottomNav,this,this.bottomNavEvent),d.default.eventManager.on(o.default.viewScroll,this,this.setScorllStop)}return e.prototype.GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},e.prototype.init=function(){return c(this,void 0,void 0,function(){var t,n,o,i,r,a,s=this;return l(this,function(e){switch(e.label){case 0:return t=this.GetQueryString("page"),n=window.location.href,t&&(window.location.href=location.origin+location.pathname+"#"+t+location.search),new f.default,d.default.root=$("#root"),d.default.route.init(),this.update(),this,new g.default,$("body").on("loginEvent",function(){return c(s,void 0,void 0,function(){return l(this,function(e){return[2]})})}),o=navigator.userAgent.toLowerCase(),-1!=o.indexOf("micromessenger")?[4,p.Net.getData(p.Api.userInfo)]:[3,2];case 1:return(i=e.sent())||(r=location.hash,a=-1!=(a=r.indexOf("?"))?a+1:a,location.href=v+"/weiXin/accessToken/?sl=123&"+r.substr(a)+"&redirect_uri="+encodeURIComponent(n)),h.default.data=i,h.default.coin=isNaN(parseInt(i.coin))?0:parseInt(i.coin),h.default.point=parseInt(i.point),h.default.moneyCoin=parseInt(i.money_coin),h.default.avatar=i.avatar,h.default.userName=i.nick_name,h.default.firstRecharge=i.firstRecharge,$("#bottomNav a").click(function(n){return c(s,void 0,void 0,function(){var t;return l(this,function(e){return t=$(n.currentTarget).data("href"),$(n.currentTarget).attr("href",t),[2]})})}),[2,!0];case 2:return $("#bottomNav a").click(function(o){return c(s,void 0,void 0,function(){var t,n;return l(this,function(e){switch(e.label){case 0:return t=$(o.currentTarget).data("href"),n=_czc||[],console.log(t),-1==t.indexOf("personal")?[3,2]:[4,p.Net.getData(p.Api.userInfo)];case 1:if(!e.sent())return n.push(["_trackEvent","我的","点击登录"]),$(".loginDialog").show(),[2];e.label=2;case 2:return-1!=t.indexOf("find")&&n.push(["_trackEvent","发现页","点击发现"]),location.href=location.pathname+t,[2]}})})}),[4,p.Net.getData(p.Api.userInfo)];case 3:return(u=e.sent())&&(h.default.coin=isNaN(parseInt(u.coin))?0:parseInt(u.coin),h.default.point=parseInt(u.point),h.default.moneyCoin=parseInt(u.money_coin),h.default.avatar=u.avatar,h.default.userName=u.nick_name,h.default.firstRecharge=u.firstRecharge),(new m.default).addTimer(),[2]}})})},e.prototype.update=function(e,t){var n=this;void 0===e&&(e=0),void 0===t&&(t=0),d.default.eventManager.event(o.default.update),requestAnimationFrame(function(e){n.update(),TWEEN.update(e)})},e.prototype.bottomNavEvent=function(n){return c(this,void 0,void 0,function(){var t;return l(this,function(e){if(t=$("#bottomNav"),n.hide)return t.css({bottom:"-1000px"}),[2];switch(t.css({bottom:"0"}),n.type&&t.find("a").removeClass("cur"),n.type){case"index":t.find(".index").addClass("cur");break;case"find":t.find(".find").addClass("cur");break;case"personal":t.find(".personal").addClass("cur")}return[2]})})},e.prototype.setScorllStop=function(e){e?$("body,html").addClass("hidden"):$("body,html").removeClass("hidden")},e}())},{"./common/Config":3,"./common/EventType":5,"./common/Net":6,"./common/UserData":7,"./core/Core":10,"./logic/component/Login":18,"./logic/component/marquee":20,"./logic/error/Error":23}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={hit:"/res/other/audio/touch2.mp3",failed:"/res/other/audio/plunderfail.mp3",win:"/res/other/audio/lotteryresult.mp3",win2:"/res/other/audio/shine2.mp3",win3:"/res/other/audio/scream.mp3"}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"baseUrl",{get:function(){return"www.52kouhong.com"==location.hostname?hostUrl.apiH5Url:"http://api-h5.786g.com"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"imgBase",{get:function(){return"www.52kouhong.com"==location.hostname?hostUrl.staticUrl:"http://s-h5.786g.com/"},enumerable:!0,configurable:!0}),e.version=20190117113,e}();n.default=o},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={_6001:6001,_6002:6002,_6003:6003,_6004:6004,_6005:6005,_6006:6006,_6007:6007,_6008:6008,_6009:6009,_6012:6012,_6201:6201,_6202:6202,_6204:6204,_6205:6205,_6206:6206,_6207:6207,_6301:6301,_6302:6302,_6303:6303,_6304:6304,_6305:6305,_6306:6306,_6307:6307,_6102:6102,_6101:6101,_6103:6103,_6402:6402,_6401:6401}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={update:"update",error:"error",updateBottomNav:"updateBottomNav",viewScroll:"viewScroll",updateGameInnerUser:"updateGameInnerUser",gameInnerState:"gameInnerState"}},{}],6:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Config"),s=e("../core/Core"),c=e("./EventType"),r=i.default.baseUrl,l=function(){function e(){}return e.index={name:"index",url:r+"/index/"},e.roomList={name:"roomList",url:r+"/room/list/"},e.roomInfo={name:"roomInfo",url:r+"/room/info"},e.gameStart={name:"gameStart",url:r+"/user/game/start/"},e.gameEnd={name:"gameEnd",url:r+"/user/game/end/"},e.gameReward={name:"gameReward",url:r+"/user/game/accept"},e.login={name:"login",url:r+"/weiXin/accessToken"},e.userInfo={name:"userInfo",url:r+"/user/info"},e.userInfoBase={name:"userInfo",url:r+"/user/info/base"},e.find={name:"find",url:r+"/article/"},e.findList={name:"findList",url:r+"/article/list"},e.articleInfo={name:"articleInfo",url:r+"/article/info"},e.messageList={name:"messageList",url:r+"/user/mes/index"},e.newsInfo={name:"newsInfo",url:r+"/user/mes/info"},e.addressList={name:"addressList",url:r+"/user/address"},e.addressAdd={name:"addressAdd",url:r+"/user/address/add"},e.addressUpdate={name:"addressUpdate",url:r+"/user/address/update"},e.addressDel={name:"addressDel",url:r+"/user/address/del"},e.articleFav={name:"articleFav",url:r+"/user/collect/article"},e.favList={name:"favList",url:r+"/user/collectList/article"},e.favRoomList={name:"favRoomList",url:r+"/user/collectList/room"},e.roomFav={name:"roomFav",url:r+"/user/collect/room"},e.articleShare={name:"articleShare",url:r+"/user/share/article"},e.signList={name:"signList",url:r+"/signature/list"},e.roomShare={name:"roomShare",url:r+"/user/share/room"},e.signature={name:"signature",url:r+"/user/signature"},e.recharge={name:"recharge",url:r+"/recharge/"},e.rechargeRecord={name:"rechargeRecord",url:r+"/user/rechargeList"},e.awardsBox={name:"awardsBox",url:r+"/user/goods"},e.goodsOrder={name:"goodsOrder",url:r+"/user/order/create"},e.OrderInfo={name:"OrderInfo",url:r+"/user/order/info"},e.OrderList={name:"OrderList",url:r+"/user/order"},e.userPay={name:"userPay",url:r+"/user/pay"},e.wxJsdk={name:"wxJsdk",url:r+"/weiXin/jsdk?redirect_uri="+encodeURIComponent(window.location.href)},e.codeShare={name:"codeShare",url:r+"/code/en"},e.hitMes={name:"hitMes",url:r+"/hitMes"},e.userPromote={name:"userPromote",url:r+"/user/promote"},e.register={name:"register",url:r+"/user/phone/code"},e.codePic={name:"codePic",url:r+"/code/img/"},e.phoneLogin={name:"phoneLogin",url:r+"/user/phone"},e.promoteGift={name:"promoteGift",url:r+"/user/promoteGift"},e.userPromoteGift={name:"userPromoteGift",url:r+"/user/promoteGift/getGift"},e.userPromoteList={name:"userPromoteList",url:r+"/user/promoteGift/list"},e.gameAgain={name:"gameAgain",url:r+"/user/game/again"},e}();n.Api=l;var u=function(){function e(){}return e.getData=function(i,r){return o(this,void 0,void 0,function(){var t,n,o;return a(this,function(e){switch(e.label){case 0:if(!i)return[2,null];if(t="",r)for(n in r)t+="/"+n+"-"+r[n];return console.log("%c ==> "+i.name,"color:rgba(255, 0, 0, .8);font-weight:700;background-color:rgba(0,0,0, 0.1)",i.url,r),[4,s.default.utils.ajax({url:i.url+t,dataType:"json"})];case 1:return(o=e.sent())?o.code?(s.default.eventManager.event(c.default.error,{data:o,api:i.name}),[2,null]):(console.log("%c <== "+i.name,"color:rgba(27, 144, 4, 1);font-weight:700;background-color:rgba(0,0,0, 0.1)",o.mes),[2,o.mes]):(console.error(i.name+" 没有数据返回!"),[2,null])}})})},e}();n.Net=u},{"../core/Core":10,"./Config":3,"./EventType":5}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.preset=2,e.userName="",e}();n.default=o},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../logic/view_logic/IndexLogic"),i=e("../logic/view_logic/GameLogic"),r=e("../logic/view_logic/FindLogic"),a=e("../logic/view_logic/NewsContent"),s=e("../logic/view_logic/CollectLogic"),c=e("../logic/view_logic/RechargeLogic"),l=e("../logic/view_logic/RechargeSuccess"),u=e("../logic/view_logic/RechargeRecordLogic"),d=e("../logic/view_logic/IntegralLogic"),f=e("../logic/view_logic/OrderDetail"),p=e("../logic/view_logic/IntegralDetail"),h=e("../logic/view_logic/AwardsBox"),m=e("../logic/view_logic/PersonalLogic"),g=e("../logic/view_logic/GameInner"),v=e("../logic/view_logic/EmailLogic"),y=e("../logic/view_logic/newsInfo"),w=e("../logic/view_logic/MyOrder"),b=e("../logic/view_logic/AddressesLogic"),_=e("../logic/view_logic/AddressLogic"),x=e("../logic/view_logic/Logistics"),$=e("../logic/view_logic/Customer"),k=e("../logic/view_logic/MyShare"),C=e("../logic/view_logic/MySign"),D=e("../logic/view_logic/UpdateAddress"),I=e("../logic/view_logic/OrderSubmit"),S=e("../logic/view_logic/FriendRecharge"),L=e("../logic/view_logic/ShareFriendRecharge"),M=e("../logic/view_logic/Guide"),T=e("../logic/view_logic/GameEludeLogic"),N=e("../logic/view_logic/GameNumberLogic"),A=e("../logic/view_logic/Recommend"),O=e("../logic/view_logic/RecommendTips"),B=e("../logic/view_logic/RewardPage"),P=function(){function e(){}return e.index={name:"index",class:o.default,skin:"view/main.html",closePre:!0},e.find={name:"find",class:r.default,skin:"view/find.html",closePre:!0},e.newsContent={name:"newsContent",class:a.default,skin:"view/news-content.html",closePre:!0},e.collect={name:"collect",class:s.default,skin:"view/collect.html",closePre:!0},e.recharge={name:"recharge",class:c.default,skin:"view/recharge.html",closePre:!1},e.rechargeSuccess={name:"rechargeSuccess",class:l.default,skin:"view/rechargeSuccess.html",closePre:!0},e.rechargeRecord={name:"rechargeRecord",class:u.default,skin:"view/rechargeRecord.html",closePre:!1},e.friendRecharge={name:"friendRecharge",class:S.default,skin:"view/friendRecharge.html",closePre:!1},e.shareFriendRecharge={name:"shareFriendRecharge",class:L.default,skin:"view/shareFriendRecharge.html",closePre:!0},e.integral={name:"integral",class:d.default,skin:"view/integral.html",closePre:!0},e.myOrder={name:"myOrder",class:w.default,skin:"view/myOrder.html",closePre:!0},e.orderDetail={name:"orderDetail",class:f.default,skin:"view/orderDetail.html",closePre:!0},e.orderSubmit={name:"orderSubmit",class:I.default,skin:"view/orderSubmit.html",closePre:!0},e.integralDetail={name:"integralDetail",class:p.default,skin:"view/integralDetail.html",closePre:!0},e.awardsBox={name:"awardsBox",class:h.default,skin:"view/awardsBox.html",closePre:!0},e.personal={name:"personal",class:m.default,skin:"view/personal.html",closePre:!0},e.gameInner={name:"gameInner",class:g.default,skin:"view/gameInner.html",closePre:!0},e.email={name:"email",class:v.default,skin:"view/email.html",closePre:!0},e.newsInfo={name:"newsInfo",class:y.default,skin:"view/newsInfo.html",closePre:!0},e.addresses={name:"addresses",class:b.default,skin:"view/addresses.html",closePre:!0},e.updateAddress={name:"updateAddress",class:D.default,skin:"view/updateAddress.html",closePre:!0},e.address={name:"address",class:_.default,skin:"view/address.html",closePre:!0},e.logistics={name:"logistics",class:x.default,skin:"view/logistics.html",closePre:!0},e.customer={name:"customer",class:$.default,skin:"view/customer.html",closePre:!0},e.myShare={name:"myShare",class:k.default,skin:"view/myShare.html",closePre:!0},e.mySign={name:"mySign",class:C.default,skin:"view/mySign.html",closePre:!0},e.guide={name:"guide",class:M.default,skin:"view/guide.html",closePre:!0},e.recommend={name:"recommend",class:A.default,skin:"view/recommend.html",closePre:!1},e.recommendTips={name:"recommendTips",class:O.default,skin:"view/recommendTips.html",closePre:!1},e.rewardPage={name:"rewardPage",class:B.default,skin:"view/rewardPage.html",closePre:!0},e.game={name:"game",class:i.default,skin:"view/game.html",closePre:!1},e.gameElude={name:"gameElude",class:T.default,skin:"view/gameElude.html",closePre:!1},e.gameNumber={name:"gameNumber",class:N.default,skin:"view/gameNumber.html",closePre:!1},e}();n.default=P},{"../logic/view_logic/AddressLogic":24,"../logic/view_logic/AddressesLogic":25,"../logic/view_logic/AwardsBox":26,"../logic/view_logic/CollectLogic":27,"../logic/view_logic/Customer":28,"../logic/view_logic/EmailLogic":29,"../logic/view_logic/FindLogic":30,"../logic/view_logic/FriendRecharge":31,"../logic/view_logic/GameEludeLogic":32,"../logic/view_logic/GameInner":33,"../logic/view_logic/GameLogic":34,"../logic/view_logic/GameNumberLogic":35,"../logic/view_logic/Guide":36,"../logic/view_logic/IndexLogic":37,"../logic/view_logic/IntegralDetail":38,"../logic/view_logic/IntegralLogic":39,"../logic/view_logic/Logistics":40,"../logic/view_logic/MyOrder":41,"../logic/view_logic/MyShare":42,"../logic/view_logic/MySign":43,"../logic/view_logic/NewsContent":44,"../logic/view_logic/OrderDetail":45,"../logic/view_logic/OrderSubmit":46,"../logic/view_logic/PersonalLogic":47,"../logic/view_logic/RechargeLogic":48,"../logic/view_logic/RechargeRecordLogic":49,"../logic/view_logic/RechargeSuccess":50,"../logic/view_logic/Recommend":51,"../logic/view_logic/RecommendTips":52,"../logic/view_logic/RewardPage":53,"../logic/view_logic/ShareFriendRecharge":54,"../logic/view_logic/UpdateAddress":55,"../logic/view_logic/newsInfo":56}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){(e.instance=this).onAwake()}return e.prototype.onAwake=function(){},e.prototype.onDestroy=function(){},e}();n.default=o},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ViewManager"),i=e("./EventDispatcher"),r=e("./Utils"),a=e("./Route"),s=function(){function e(){}return e.viewManager=o.default,e.eventManager=i.default,e.utils=r.default,e.route=a.default,e}();n.default=s},{"./EventDispatcher":11,"./Route":12,"./Utils":13,"./ViewManager":15}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.event=function(e,t){var n=this.list[e];if(n)for(var o=n.length-1;-1<o;o--)n[o].listener.call(n[o].caller,t)},e.on=function(e,t,n){this.list[e]||(this.list[e]=[]),this.list[e].push({caller:t,listener:n})},e.off=function(e,t){var n=this.list[e];if(n)for(var o=n.length-1;-1<o;o--)n[o].listener==t&&(n[o].listener=null,n.splice(o,1))},e.list={},e}();n.default=o},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../common/ViewConfig"),i=e("./Core"),r=function(){function e(){}return e.init=function(){var t=this;this.listen(),"onhashchange"in window?$(window).on("hashchange",function(e){console.log(e),t.oldUrl=e.oldURL,t.newUrl=e.newURL,t.listen()}):alert("浏览器版本过低，请换个浏览器!")},e.listen=function(){var e=location.hash;this.dispatcher(e.match(/[^#]\w+/))},e.dispatcher=function(e){e||(e=["index"]),o.default[e[0]]?(i.default.viewManager.openView(o.default[e[0]]),this.listenFloatViewState()):console.error("模板不存在，现在还未做处理")},e.listenFloatViewState=function(){for(var e=i.default.viewManager.views,t=0;t<e.length;t++)e[t][0].isAdd&&!o.default[e[t][1]].closePre&&(i.default.viewManager.closeView(o.default[e[t][1]]),t--)},e}();n.default=r},{"../common/ViewConfig":8,"./Core":10}],13:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},i=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.ajax=function(n){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t,e){$.ajax({type:n.type,url:n.url,data:n.data,dataType:n.dataType,contentType:n.contentType,xhrFields:{withCredentials:!0},success:function(e){t(e)}})})];case 1:return[2,e.sent()]}})})},e.getPositionByAngle=function(e,t,n){return{x:n.x+t*Math.cos(e*Math.PI/180),y:n.y+t*Math.sin(e*Math.PI/180)}},e.replaceData=function(e,t,n){var o=new RegExp("{{"+e+"}}");return t.replace(o,n)},e.getValueByUrl=function(e,t){var n=location.hash.match(new RegExp("[?=?|?=&]"+e+"=([^&]*)"));return null===n?null:n[1]},e.mergeImage=function(a){var s=document.createElement("canvas"),c=s.getContext("2d"),l=a.images.length;return s.width=a.width,s.height=a.hieght,c.rect(0,0,s.width,s.height),c.fillStyle="#fff",c.fill(),new Promise(function(r){!function e(t){if(t<l){var n=new Image;n.crossOrigin="anonymous",n.src=a.images[t].src,n.onload=function(){a.images[t].x=a.images[t].x?a.images[t].x:0,a.images[t].y=a.images[t].y?a.images[t].y:0,a.images[t].width=a.images[t].width?a.images[t].width:n.width,a.images[t].height=a.images[t].height?a.images[t].height:n.height,c.drawImage(n,a.images[t].x,a.images[t].y,a.images[t].width,a.images[t].height),e(t+1)}}else{if(a.texts)for(var o=0,i=a.texts.length;o<i;o++)c.font=(a.texts[o].fontSize?a.texts[o].fontSize:24)+"px Microsoft YaHei",c.fillStyle=a.texts[o].color,c.fillText(a.texts[o].string,a.texts[o].x,a.texts[o].y);r(s.toDataURL("image/jpeg",a.quality?a.quality:1))}}(0)})},e.playSound=function(e){if(!this.context)try{var t=window.AudioContext||window.webkitAudioContext||window.msAudioContext||window["mozAudioContext "];this.context=new t}catch(e){alert("你的浏览器连个Web-Audio-API 都不支持！！")}if(this.context){var n=this.context,o=this,i=n.createBufferSource();!function(t){if(o.soundList[t])return r(o.soundList[t]);var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){n.decodeAudioData(e.response,function(e){r(o.soundList[t]=e)},null)},e.send()}(e)}else console.error("播放音效失败!");function r(e){i.buffer=e,i.connect(n.destination),i.loop=!1,i.start()}},e.getPositionLength=function(e,t){var n=t.x-e.x,o=t.y-e.y;return Math.abs(Math.pow(n*n+o*o,.5))},e.isWx=function(){return/MicroMessenger/i.test(navigator.userAgent)},e.isWebAppp=function(){return/AppleWebKit.*Mobile.*/i.test(navigator.userAgent)},e.soundList={},e}();n.default=r},{}],14:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("./Base"),a=e("./Core"),s=e("../common/EventType"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animation=!0,e.isCloseAnimation=!1,e.isAdd=!1,e.storage=!1,e}return i(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(e){this._template=e},enumerable:!0,configurable:!0}),e.prototype.onAwake=function(){},e.prototype.onCreate=function(e){},e.prototype.add=function(e,t){var n=this;void 0===t&&(t=!1),this.onCreate(),e.append("<div id="+this.name+' class="view '+(t?"absolute":"")+' full-window">'+this._template+"</div>"),e[0].scrollTop=0,this.isAdd=!0,this.node=$("#"+this.name),this.node&&this.node.on("click",function(e){e.stopPropagation(),n.onClick(e)}),this.onEnable(),a.default.eventManager.on(s.default.update,this,this.onUpdate)},e.prototype.openAnimation=function(){var e=this;this.node.css({opacity:0,transform:"translateX(1.5rem)"}),this.node.animate({opacity:1,transform:"translateX(0)"},400,"ease-out",function(){e.node.css({transform:null})})},e.prototype.closeAnimation=function(){var e=this;this.node.animate({opacity:0,transform:"translateX(1.5rem)"},200,"ease-out",function(){e.remove()})},e.prototype.onClick=function(e){},e.prototype.onEnable=function(){},e.prototype.onUpdate=function(){},e.prototype.remove=function(){this.isAdd=!1,this.node.off(),this.node.remove(),this.node&&this.node.off("click"),a.default.eventManager.off(s.default.update,this.onUpdate),this.onRemove()},e.prototype.onRemove=function(){},e}(r.default);n.default=c},{"../common/EventType":5,"./Base":9,"./Core":10}],15:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},c=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("./Core"),u=e("../common/Net"),d=e("../common/EventType"),f=e("../common/Config"),i=function(){function e(){}return e.openView=function(a,s){return o(this,void 0,void 0,function(){var t,n,o,i,r;return c(this,function(e){switch(e.label){case 0:return(t=this.viewCache[a.name])?[3,2]:(t=new a.class,(this.viewCache[a.name]=t).name=a.name,n=t,[4,l.default.utils.ajax({url:a.skin+"?v="+f.default.version})]);case 1:n.template=e.sent(),e.label=2;case 2:return a.closePre&&l.default.currentView&&this.closeView(l.default.currentView),t.isAdd?[3,7]:(l.default.eventManager.event(d.default.updateBottomNav,{hide:!0}),t.dataSource=s,t.data?[3,4]:(o=t,[4,u.Net.getData(u.Api[a.name])]));case 3:return o.data=e.sent(),[3,6];case 4:return t.storage?[3,6]:(i=t,[4,u.Net.getData(u.Api[a.name])]);case 5:i.data=e.sent(),e.label=6;case 6:if(t.add){for(r in this.views)this.views[r][1]==a.name&&0==a.closePre&&t.remove();this.views.push([t,a.name]),t.add(l.default.root,!a.closePre)}t.openAnimation&&t.animation&&t.openAnimation(),e.label=7;case 7:return a.closePre&&(l.default.currentView=a),$(".prizePlay").css("display"),$(".full-window").css("padding-top","0.8rem"),"game"==a.name&&$(".full-window").css("padding-top","0"),console.log("%c ==> ","color:#fff;font-weight:700;background-color:rgba(27, 144, 4, 0.7)"," open "+a.name),[2]}})})},e.closeView=function(e){if(e){var t=this.viewCache[e.name];if(t){var n=location.hash.match(/[^#]\w+/);l.default.currentView==e&&n&&"personal"!=n[0]&&(l.default.preView=e),t.closeAnimation&&t.isCloseAnimation?t.closeAnimation():t.remove();for(var o=0;o<this.views.length;o++)this.views[o][1]==e.name&&this.views.splice(0,1);console.log("%c <== ","color:#fff;font-weight:700;background-color:rgba(255, 0, 0, 0.7)"," close "+e.name)}else console.warn("lose "+e.name+" view!")}},e.views=[],e.viewCache={},e}();n.default=i},{"../common/Config":3,"../common/EventType":5,"../common/Net":6,"./Core":10}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/Core"),i=e("../../common/ViewConfig"),r=function(){function e(e,t){if(this.box=$(e),t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.creatDialog()}return e.prototype.creatDialog=function(){var e='<div class="orderDialog">\n                             <div class="dialogCon">\n                                <div class="close" style="display:'+(1==this.closeShow?"block":"none")+'"></div>\n                                 <p class="tit">'+this.title+'</p>\n                                 <p class="tips" style="text-align:'+this.cssTip+";padding:"+this.cssPadding+";line-height:"+this.cssLine+'">'+this.content+"</p>\n                                 <div class='btnsT'>",t=0;for(var n in this.buttons){e+="<div class='btns btns"+t+"'>"+n+"</div>",this.box.on("click",".btns"+t,this.buttons[n]),t++}e+=" </div></div>\n                    </div>",this.box.html(e),this.box.on("click",".close",function(){o.default.viewManager.closeView(i.default.recharge),$(".orderDialog").hide()})},e}();n.default=r},{"../../common/ViewConfig":8,"../../core/Core":10}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.first=[],this.second=[],this.third=[],this.selectedIndex=[0,0,0],this.checked=[0,0,0];var e=this.selectedIndex,c=this.first,l=this.second,u=this.third,o=this.checked;function i(e,i){e.forEach(function(e,t,n){var o={text:e.name,value:t,id:e.id};i.push(o)})}i(city,c),city[e[0]].hasOwnProperty("child")?i(city[e[0]].child,l):l=[{text:"",value:0}],city[e[0]].child[e[1]].hasOwnProperty("child")?i(city[e[0]].child[e[1]].child,u):u=[{text:"",value:0}];var r=new Picker({data:[c,l,u],selectedIndex:e,title:"地址选择"});(this.picker=r).on("picker.change",function(e,n){0===e?function(){l=[],u=[],o[0]=n;var e=city[n];if(e.hasOwnProperty("child")){i(e.child,l);var t=city[n].child[0];t.hasOwnProperty("child")?i(t.child,u):(u=[{text:"",value:0}],o[2]=0)}else l=[{text:"",value:0}],u=[{text:"",value:0}],o[1]=0,o[2]=0;r.refillColumn(1,l),r.refillColumn(2,u),r.scrollColumn(1,0),r.scrollColumn(2,0)}():1===e&&function(){u=[],o[1]=n;var e=o[0];if(city[e].child[n].hasOwnProperty("child")){var t=city[e].child[n];i(t.child,u),r.refillColumn(2,u),r.scrollColumn(2,0)}else u=[{text:"",value:0}],o[2]=0,r.refillColumn(2,u),r.scrollColumn(2,0)}()}),r.on("picker.select",function(e,t){var n=c[t[0]].text,o=l[t[1]].text,i=u[t[2]]?u[t[2]].text:"",r=c[t[0]].id,a=l[t[1]].id,s=u[t[2]].id?u[t[2]].id:"0";$("#addressLocation").val(n+" "+o+" "+i),$("#addressLocation").data("province",r),$("#addressLocation").data("city",a),$("#addressLocation").data("area",s)})}return e.prototype.show=function(){this.picker.show()},e}();n.default=o},{}],18:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},i=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../common/Net"),a=e("../../core/Core"),s=e("../../common/EventType"),c=e("../../common/Config"),l=function(){function e(){this.time=60,this.baseUrl=c.default.baseUrl,this.attach=0,this.clickR=!1,this.init()}return e.prototype.init=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return this.code=this.getCodePic(),window.location.href,a.default.eventManager.on(s.default.error,this,this.onError),this.createTemplate(),[2]})})},e.prototype.createTemplate=function(){return o(this,void 0,void 0,function(){var t,n=this;return i(this,function(e){return"",t='<div class="loginT">\n                    <div class="closeLogin"></div>\n                </div>\n                  <div class="loginForm">\n                    <div class="inputLine">\n                        <input type="text" placeholder="手机号码" class="phone" />\n                    </div>\n                    <div class="inputLine valPic">\n                        <input type="text" class="valcode" placeholder="输入图中验证码">\n                        <div class="code_capats"><img src="'+this.code+'" /></div>\n                    </div>\n                    <div class="inputLine">\n                        <input class="vate_code"   type="text" name="capth" placeholder="验证码">\n                        <button type="button" class="valadite_btn">获取验证码</button>\n                    </div>\n                    <div class="errorTip"></div>\n                  </div>\n                  <div class="loginBtn">登录</div>',$(".loginCon").html(t),$(".loginDialog").on("click",".code_capats",function(e){$(".code_capats img")[0].src=n.getCodePic()}),$(".loginDialog").on("click",".valadite_btn",function(e){n.sendValcode()}),$(".loginDialog").on("click",".loginBtn",function(e){n.registerClick()}),$(".closeLogin").click(function(){$(".phone").val(""),$(".valcode").val(""),$(".vate_code").val(""),$(".loginDialog").hide(),$(".errorTip").hide(),$(".valadite_btn").text("获取验证码").removeAttr("disabled")}),[2]})})},e.prototype.getCodePic=function(){return this.baseUrl+"/code/img/?random="+Math.random()},e.prototype.timer=function(){var e=this,t=setInterval(function(){0===e.time?($(".valadite_btn").text("重新发送").removeAttr("disabled"),clearInterval(t),e.clickR=!1):($(".valadite_btn").attr("disabled",!0),$(".valadite_btn").text(e.time+"s后重新获取")),e.time--},1e3)},e.prototype.sendValcode=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return 0!=this.clickR?[2]:(this.clickR=!0,[4,r.Net.getData(r.Api.register,{phone:$(".phone").val(),code:$(".valcode").val()})]);case 1:return e.sent()?this.timer():(this.clickR=!1,$(".code_capats img")[0].src=this.getCodePic()),[2]}})})},e.prototype.GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.href.substr(1).match(t);return null!=n?unescape(n[2]):null},e.prototype.registerClick=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.GetQueryString("attach")&&(this.attach=this.GetQueryString("attach")),[4,r.Net.getData(r.Api.phoneLogin,{phone:$(".phone").val(),code:$(".vate_code").val(),attach:this.attach})];case 1:return e.sent()&&($(".valadite_btn").text("获取验证码").removeAttr("disabled"),$(".loginDialog").hide(),$("body").triggerHandler("loginEvent")),[2]}})})},e.prototype.onError=function(e){switch(e.api){case r.Api.register.name:case r.Api.phoneLogin.name:$(".errorTip").show(),$(".errorTip").html(e.data.mes),setTimeout(function(){$(".errorTip").hide()},1500)}},e}();n.default=l},{"../../common/Config":3,"../../common/EventType":5,"../../common/Net":6,"../../core/Core":10}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){var t=this;this.currentIndex=0,this.touch=!1,this.currentX=0,this.box=$(e),this.sliderList=this.box.find("em"),this.maxWidth=this.box.width(),this.point=this.box.find(".banner-point"),this.box.on("touchstart",function(e){return t.onTouchStart(e)}),this.box.on("touchmove",function(e){return t.onTouchMove(e)}),this.box.on("touchend",function(e){return t.onTouchEnd(e)}),this.init(),this.creatPoint()}return e.prototype.init=function(){this.setSliderAttribute(0),this.creatTime()},e.prototype.initZIndex=function(){for(var e=this.sliderList.length-1;-1<e;e--)this.sliderList[e].style.zIndex=0},e.prototype.creatPoint=function(){for(var e="",t=0;t<this.sliderList.length;t++)e+="<i></i>";this.point.html(e),this.setPointCurrent()},e.prototype.setPointCurrent=function(){for(var e=this.point.find("i"),t=e.length-1;-1<t;t--)e.eq(t).removeClass("cur");e.eq(this.currentIndex).addClass("cur")},e.prototype.onTouchStart=function(e){if("I"==e.target.nodeName||"point"==e.target.id)return!1;this.clearTime(),this.tween&&this.tween.stop(),this.touch=!0;var t=$(e.target).parent();this.currentIndex=t.index(),this.initZIndex(),t.css({zIndex:10}),this.oldTouchX=e.changedTouches[0].pageX,this.oldMoveX=this.conversionX(this.sliderList.eq(this.currentIndex));var n=(e.changedTouches[0].pageX-this.oldTouchX)/this.maxWidth,o=this.oldMoveX+100*n;this.currentX=o},e.prototype.onTouchMove=function(e){if(this.touch){var t=(e.changedTouches[0].pageX-this.oldTouchX)/this.maxWidth,n=this.oldMoveX+100*t;this.initZIndex(),this.sliderMove(this.currentIndex,n);var o=void 0;n<0?((o=this.currentIndex+1)>this.sliderList.length-1&&(o=0),this.sliderMove(o,100+n)):((o=this.currentIndex-1)<0&&(o=this.sliderList.length-1),this.sliderMove(o,n-100)),this.currentX=n,this.setSliderAttribute(o)}return!1},e.prototype.onTouchEnd=function(e){var t=this;if(this.touch){if(this.touch=!1,this.currentX){var n={x:this.currentX},o=this.sliderList;return this.currentX<-10?(this.currentIndex=this.next(2),this.tween=new TWEEN.Tween(n).to({x:-100},600).easing(TWEEN.Easing.Quadratic.Out).onUpdate(function(){o.eq(t.next(1)).css({zIndex:10,transform:"translateX("+n.x+"%)"}),o.eq(t.currentIndex).css({transform:"translateX("+(n.x+100)+"%)"})}).start().onComplete(function(){t.creatTime()})):10<this.currentX?(this.currentIndex=this.next(1),this.tween=new TWEEN.Tween(n).to({x:100},600).easing(TWEEN.Easing.Quadratic.Out).onUpdate(function(){o.eq(t.next(2)).css({zIndex:10,transform:"translateX("+n.x+"%)"}),o.eq(t.currentIndex).css({transform:"translateX("+(n.x-100)+"%)"})}).start().onComplete(function(){t.creatTime()})):this.tween=new TWEEN.Tween(n).to({x:0},600).easing(TWEEN.Easing.Quadratic.Out).onUpdate(function(){o.eq(t.currentIndex).css({transform:"translateX("+n.x+"%)"}),0<t.currentX?o.eq(t.next(1)).css({zIndex:10,transform:"translateX("+(n.x-100)+"%)"}):o.eq(t.next(2)).css({zIndex:10,transform:"translateX("+(100+n.x)+"%)"})}).start().onComplete(function(){t.creatTime()}),this.setPointCurrent(),!1}this.creatTime()}},e.prototype.next=function(e){var t;return 1===e?(t=this.currentIndex-1)<0&&(t=this.sliderList.length-1):(t=this.currentIndex+1)>this.sliderList.length-1&&(t=0),t},e.prototype.sliderMove=function(e,t){this.sliderList.eq(e).css({zIndex:10,display:"inline-block",transform:"translateX("+t+"%)"})},e.prototype.conversionX=function(e){return e.length?parseFloat(e.css("transform").match(/[0-9|.|\-]+/g)[0]):0},e.prototype.creatTime=function(){var t=this;this.time&&clearInterval(this.time),this.tween&&this.tween.stop();var n=this.sliderList;this.time=setInterval(function(){var e={x:0};t.currentIndex=t.next(2),t.setSliderAttribute(t.currentIndex),t.tween=new TWEEN.Tween(e).to({x:-100},600).easing(TWEEN.Easing.Quadratic.Out).onUpdate(function(){n.eq(t.next(1)).css({transform:"translateX("+e.x+"%)"}),n.eq(t.currentIndex).css({transform:"translateX("+(e.x+100)+"%)"})}).start(),t.setPointCurrent()},3e3)},e.prototype.setSliderAttribute=function(e){var t=this.sliderList.eq(e),n=t.find("a");t.css({display:"inline-block"}),n.attr("lazy")&&(t.css({transform:"translateX(0)"}),n.css("background-image","url("+n.attr("lazy")+")"),n.removeAttr("lazy"))},e.prototype.clearTime=function(){clearInterval(this.time)},e}();n.default=o},{}],20:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},i=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../common/Net"),a=function(){function e(){this.intervalId=-1,this.init()}return e.prototype.init=function(){return o(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,r.Net.getData(r.Api.hitMes)];case 1:return t=e.sent(),this.createTemplate(t),$(".prizePlay").show(),this.core(),[2]}})})},e.prototype.createTemplate=function(e){for(var t="",n="",o="",i=0;i<e.length;i++)1==e[i].type&&(t+='<p class="prizemes">'+e[i].mes+"</p>",t+='<p class="prizemes">'+e[i].mes+"</p>"),n+='<p class="prizemes">'+e[i].mes+"</p>",n+='<p class="prizemes">'+e[i].mes+"</p>";o=0==t.length?n:t,$(".prizeList").html(o)},e.prototype.core=function(){var a=-1,s=-1,c=10,e=document.getElementById("scroll_begin"),l=document.getElementById("scroll_div"),u=[];e.querySelectorAll(".prizemes").forEach(function(e,t){u.push(e.offsetWidth)});var d=2;s=setInterval(function e(){var t=0,n=u.slice(0,d);for(var o in n)t+=Number(n[o]);var i=$("#scroll_begin").css("padding-left");if(l.scrollLeft+l.offsetWidth>=t+parseInt(i)){if(clearInterval(s),0<a&&clearTimeout(a),d>=u.length){var r=setTimeout(function(){l.scrollLeft=0,$(".prizePlay").hide(),clearTimeout(r)},3e3);return}d+=2,a=setTimeout(function(){s=setInterval(e,c)},3e3)}else l.scrollLeft++},c)},e.prototype.addTimer=function(){var t=this,n=-1;this.intervalId=setInterval(function(){var e=(new Date).getHours();if("block"!==$(".prizePlay").css("display")&&!(-1<n))switch(!0){case 0<e&&e<=8:n=setTimeout(function(){t.init(),clearTimeout(n),n=-1},18e5);break;case 8<e&&e<=12:n=setTimeout(function(){t.init(),clearTimeout(n),n=-1},72e4);break;case 12<e&&e<=14:n=setTimeout(function(){t.init(),clearTimeout(n),n=-1},36e4);break;case 14<e&&e<=18:n=setTimeout(function(){t.init(),clearTimeout(n),n=-1},72e4);break;case 18<e&&e<=22:n=setTimeout(function(){t.init(),clearTimeout(n),n=-1},12e4);break;case 22<e&&e<=0:n=setTimeout(function(){t.init(),clearTimeout(n),n=-1},72e4);break;default:t.removeTimer()}},1e3)},e.prototype.removeTimer=function(){clearInterval(this.intervalId)},e}();n.default=a},{"../../common/Net":6}],21:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},i=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../common/Net"),a=function(){function e(){this.init()}return e.prototype.init=function(){return o(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,r.Net.getData(r.Api.userInfo,{userMes:1,userGoods:1})];case 1:return t=e.sent(),this.setUserInfo(t),[2]}})})},e.prototype.setUserInfo=function(e){var t,n=e.coin/100,o=parseInt(n);t='<div class="headport">\n                <img src="'+(-1==e.avatar.indexOf("http")?"http://s-h5.52kouhong.com/upload/2018/ci/avatar.jpg":e.avatar)+'" alt="">\n            </div>\n            <div class="tit">\n                <h3>'+e.nick_name+"</h3>\n                <p>我的魅力币："+o+"</p>\n                <p>我的积分数："+e.point+"</p>\n            </div>",$("#headportbox").html(t)},e}();n.default=a},{"../../common/Net":6}],22:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},i=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../common/Net"),a=e("../../core/Core"),s=e("../../common/EventType"),c=e("../../common/ErrorMap"),l=function(){function e(){this.init()}return e.prototype.init=function(){return o(this,void 0,void 0,function(){var t,n,o;return i(this,function(e){switch(e.label){case 0:return t=this,a.default.eventManager.on(s.default.error,this,this.onError),[4,r.Net.getData(r.Api.signature)];case 1:return n=e.sent(),o=n.list.sort(function(e,t){return e.id-t.id}),this.getSignList(o,n.dayList),$(".sinBtn").click(function(){t.signEvent()}),$("#signDialog").on("click",".okayBtn",function(){t.closeSign()}),[2]}})})},e.prototype.setSignDialog=function(){$("#signDialog").find(".mask").show(),$("#signDialog").find(".signCon").addClass("slideInDown")},e.prototype.getSignList=function(e,t){var n,o="";0<t.length&&t[0].num&&(n=parseInt(t[0].num));for(var i=0;i<e.length;i++)o+='<li class="days-small '+(0<n?"days-disable":"")+'" data-id="'+e[i].id+'">\n                        <div class="t">第'+(i+1)+'天</div>  \n                        <div class="'+(0<n?"complete":"")+'"></div>                      \n                        <p class="'+(-1<e[i].title.indexOf("积分")?"jfico":"signicon")+'"></p>\n                        <p class="money">'+e[i].title+"</p>\n                    </li>",n--;$("#mySignDays").html(o),$("#mySignDays").children("li").eq(2).addClass("days-big"),$("#mySignDays").children("li").eq(6).addClass("days-big");var r=new Date,a=r.getFullYear(),s=(r.getMonth()+1).toString().replace(/^(\d)$/,"0$1"),c=r.getDate().toString().replace(/^(\d)$/,"0$1"),l=Date.parse(a+"-"+s+"-"+c);if(0!=t.length)for(i=0;i<t.length;i++){if(Date.parse(t[i].c_date)==l){$("#signDialog").find(".mask").hide(),$(".signCon").remove();break}this.setSignDialog()}else this.setSignDialog()},e.prototype.signEvent=function(){return o(this,void 0,void 0,function(){var t,n,o;return i(this,function(e){switch(e.label){case 0:return[4,r.Net.getData(r.Api.signature,{action:1})];case 1:return t=e.sent(),n=t.goodsInfo,t&&($("#signDialog").find(".signCon").remove(),o=' <div class="mask"></div>\n                        <div class="signSucess">\n                                <p class="tips">恭喜您</p>\n                                <div class="monGet">\n                                <span class="'+(-1<n.title.indexOf("积分")?"icon1":"icon")+'"></span>\n                                <span class="num">'+n.title+'</span>\n                            </div>\n                            <div class="okayBtn">确定</div>\n                        </div>',$("#signDialog").append(o),$("#signDialog").find(".mask").show(),$("#signDialog").find(".signSucess").addClass("slideInDown")),[2]}})})},e.prototype.closeSign=function(){return o(this,void 0,void 0,function(){var t,n,o;return i(this,function(e){switch(e.label){case 0:return $("#signDialog").find(".mask").hide(),$("#signDialog").find(".signSucess").remove(),[4,r.Net.getData(r.Api.userInfo)];case 1:return t=e.sent(),n=isNaN(parseInt(t.coin))?0:parseInt(t.coin),o=parseInt(n/100),$(".rechargeBtn em").text(o),[2]}})})},e.prototype.onError=function(e){if(e.data.code!=c.default._6004)switch(e.api){case r.Api.signature.name:this.errorDialog(e.data.mes),this.errorTip()}},e.prototype.errorDialog=function(e){var t='<div id="toast" class="toast"  style="bottom:20%;">\n                    '+e+"\n                 </div>";$("#index").append(t),$("#signDialog").find(".mask").hide(),$(".signCon").remove()},e.prototype.errorTip=function(){setTimeout(function(){$("#toast").remove()},1e3)},e}();n.default=l},{"../../common/ErrorMap":4,"../../common/EventType":5,"../../common/Net":6,"../../core/Core":10}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/Core"),i=e("../../common/EventType"),r=function(){function e(){o.default.eventManager.on(i.default.error,this,this.onError)}return e.prototype.onError=function(e){console.error(e)},e}();n.default=r},{"../../common/EventType":5,"../../core/Core":10}],24:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/EventType"),u=e("../../common/ViewConfig"),d=e("../../common/Net"),f=e("../component/CityPicker"),p=e("../../core/Utils"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onAwake=function(){c.default.eventManager.on(l.default.error,this,this.onError)},t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var t,n=this;return a(this,function(e){switch(e.label){case 0:return this.orderId=[],this.orderId=this.dataSource?this.dataSource.orderlistId:[],$("#goBack").on("click",function(){c.default.viewManager.openView(u.default.addresses,{orderlistId:n.orderId})}),[4,p.default.ajax({url:"/src/address.js",dataType:"script"})];case 1:return e.sent(),[4,p.default.ajax({url:"/src/picker.min.js",dataType:"script"})];case 2:return e.sent(),this.cityPicke=new f.default,$("#saveAddr").on("click",function(){return r(n,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return(t={name:"",phone:"",province:"",city:"",area:"",address:"",flag:""}).name=$("#addressName").val(),t.phone=$("#addressPhone").val(),t.province=$("#addressLocation").data("province"),t.city=$("#addressLocation").data("city"),t.area=$("#addressLocation").data("area"),t.address=$("#addressArea").val(),t.flag=1==$("#switch").prop("checked")?"1":"2",[4,d.Net.getData(d.Api.addressAdd,t)];case 1:return e.sent()&&c.default.viewManager.openView(u.default.addresses,{cityValue:$("#addressLocation").val(),orderlistId:this.orderId}),[2]}})})}),t=this.cityPicke,$("#addressSel").click(function(){document.activeElement.blur(),$("input[readonly='readonly']").blur(),t.show()}),[2]}})})},t.prototype.onError=function(e){switch(e.api){case d.Api.addressAdd.name:this.errorDialog(e.data.mes),this.errorTip()}},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#address").append(t)},t.prototype.errorTip=function(){setTimeout(function(){$("#toast").remove()},1e3)},t}(s.default);n.default=h},{"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14,"../component/CityPicker":17}],25:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/Net"),d=e("../../core/Utils"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orderId=[],e}return i(e,t),e.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var t,n;return a(this,function(e){switch(e.label){case 0:return(t=this).orderId=this.dataSource?this.dataSource.orderlistId:[],$("#goBack").on("click",function(){c.default.viewManager.openView(l.default.personal,{orderlistId:t.orderId})}),$("#addAddressBtn").on("click",function(){c.default.viewManager.openView(l.default.address,{orderlistId:t.orderId})}),[4,u.Net.getData(u.Api.addressList)];case 1:return n=e.sent(),[4,d.default.ajax({url:"/src/address.js",dataType:"script"})];case 2:return e.sent(),[4,d.default.ajax({url:"/src/picker.min.js",dataType:"script"})];case 3:return e.sent(),this.getAddressList(n),$("#addressList").on("click",".content",function(){0!=t.orderId.length&&c.default.viewManager.openView(l.default.orderSubmit,{orderlistId:t.orderId,id:$(this).parent().parent().data("id"),name:$(this).parent().find(".name").text(),phone:$(this).parent().find(".phone").text(),province:$(this).parent().find(".addressL").data("province"),city:$(this).parent().find(".addressL").data("city"),area:$(this).parent().find(".addressL").data("area"),cityAssress:$(this).parent().find(".addressL").text(),address:$(this).parent().find(".addressM").text(),flag:$(this).parent().find(".type").data("flag")})}),$("#addressList").on("click",".right",function(){c.default.viewManager.openView(l.default.updateAddress,{orderlistId:t.orderId,id:$(this).parent().parent().data("id"),name:$(this).parent().find(".name").text(),phone:$(this).parent().find(".phone").text(),province:$(this).parent().find(".addressL").data("province"),city:$(this).parent().find(".addressL").data("city"),area:$(this).parent().find(".addressL").data("area"),cityAssress:$(this).parent().find(".addressL").text(),address:$(this).parent().find(".addressM").text(),flag:$(this).parent().find(".type").data("flag")})}),[2]}})})},e.prototype.getAddressList=function(a){var t="";if(0!=a.length){for(var e=function(n){var e=1==a[n].flag?"show":"none",o=[],i=[],r=[];city.forEach(function(e,t){e.id==a[n].province&&(o=e.name,e.hasOwnProperty("child")&&e.child.forEach(function(e,t){e.id==a[n].city&&(i=e.name,e.hasOwnProperty("child")&&e.child.forEach(function(e,t){e.id==a[n].area&&(r=e.name)}))}))}),t+='<li data-id="'+a[n].id+'">\n                    <div class="wrapper">\n                        <div class="left">\n                            <i class="icon addr_icon"></i>\n                        </div>\n                        <div class="content">\n                            <p class="info">\n                                <span class="name">'+a[n].name+'</span>\n                                <span class="phone">'+a[n].phone+'</span>\n                            </p>\n                            <p class="detail">\n                                 <span class=\'type\' style="display:'+e+'" data-flag="'+a[n].flag+'">默认</span>\n                                 <span class="addressL" data-province=\''+a[n].province+"' data-city='"+a[n].city+"' data-area='"+a[n].area+"'>"+o+i+r+'</span>\n                                 <span class="addressM">'+a[n].address+'</span>\n                            </p>\n                        </div>\n                        <div class="right">\n                            <span>编辑</span>\n                        </div>\n                    </div>\n                </li>'},n=0;n<a.length;n++)e(n);$("#addressList").html(t)}else{$("#addressList").html('<div class="pageNull">\n                     <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                     <p class="txt">您暂无收货地址，请去添加地址哦</p>\n                 </div>')}},e}(s.default);n.default=f},{"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],26:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/EventType"),d=e("../../common/Net"),f=e("../../common/Config"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var n,o,t,i=this;return a(this,function(e){switch(e.label){case 0:return this.setLazyLoad(),n=this,o=[],$("#goBack").on("click",function(){c.default.viewManager.openView(l.default.personal)}),c.default.eventManager.event(u.default.updateBottomNav,{hide:!0}),[4,d.Net.getData(d.Api.awardsBox)];case 1:return t=e.sent(),this.awardsGood(t),$(".awardsBox").find(".gou").forEach(function(e){$(e).click(function(){$(e).hasClass("sel")?$(e).removeClass("sel"):$(e).addClass("sel")})}),$(".aw_bottom .gou").click(function(){i.checkAll()}),this.selectAll(),$(".aw_bottom .right").click(function(){var e=$("#selAwardbox").find(".item");if(0==e.find(".sel").length)return n.errorDialog("请选择您的奖品"),void n.errorTip();for(var t=0;t<e.length;t++){1==$(e[t]).find(".gou").hasClass("sel")&&o.push($(e[t]).data("id"))}c.default.viewManager.openView(l.default.orderSubmit,{orderlistId:o})}),this.setLazyLoad(),[2]}})})},t.prototype.awardsGood=function(e){var t="";if(0==e.length){return $("#selAwardbox").html('<div class="pageNull">\n                     <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                     <p class="txt">您暂未获得任何奖品哦</p>\n                 </div>'),void $(".aw_bottom").hide()}for(var n=0;n<e.length;n++)t+='<div class="item" data-id="'+e[n].id+'">\n                    <div class="goubox">\n                        <div class="gou icon"></div>\n                    </div>\n                    <div class="img">\n                        <img class="lazy" data-src="'+(f.default.imgBase+e[n].src)+'" alt="">\n                    </div>\n                    <div class="word">\n                        <h3 class="tit">'+e[n].title+" </h3>\n                    </div>\n                </div>";$("#selAwardbox").html(t)},t.prototype.checkAll=function(){for(var e=$("#selAwardbox").find(".item"),t=0;t<e.length;t++){$(".aw_bottom .gou").hasClass("sel")?$(e[t]).find(".gou").addClass("sel"):$(e[t]).find(".gou").removeClass("sel");var n="共选中"+e.find(".sel").length+"样礼品";$("#txtNum").html(n)}},t.prototype.selectAll=function(){for(var o=$("#selAwardbox").find(".item"),e=function(n){$(o[n]).find(".gou").click(function(){$(this).hasClass("sel")&&(this.awardsId=$(o[n]).data("id"));var e=o.find(".sel").length;o.find(".sel").length==o.length?$(".aw_bottom .gou").addClass("sel"):$(".aw_bottom .gou").removeClass("sel");var t="共选中"+e+"样礼品";$("#txtNum").html(t)})},t=0;t<o.length;t++)e(t)},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#awardsBox").append(t)},t.prototype.errorTip=function(){setTimeout(function(){$("#toast").remove()},1e3)},t.prototype.setLazyLoad=function(){lazyload($(".lazy"))},t.prototype.onClick=function(e){},t}(s.default);n.default=p},{"../../common/Config":3,"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],27:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},h=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),m=e("../../core/Core"),g=e("../../common/ViewConfig"),a=e("../../common/Config"),v=e("../../common/Net"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.edit=!1,e}return i(e,t),e.prototype.onEnable=function(){return p(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c,l,u,d,f;return h(this,function(e){switch(e.label){case 0:return this.setLazyLoad(),$("#nav").on("click","em",function(){var e=$(this).index();$(this).addClass("cur").siblings().removeClass("cur"),$(".itemTab").hide().eq(e).show(),$("#itemTabCon").find("li").removeClass("edit")}),$("#goBack").on("click",function(){m.default.viewManager.openView(g.default.personal),window.history.pushState(null,"","#personal")}),[4,v.Net.getData(v.Api.favList)];case 1:return t=e.sent(),this.favArticleList(t.list),$("#favArticleList").on("click",".del-btn",function(e){var t=this;$(".sureDialog").show(),this.articleId=$(this).parent().data("id"),$(".del").click(function(){return p(t,void 0,void 0,function(){var t=this;return h(this,function(e){switch(e.label){case 0:return[4,v.Net.getData(v.Api.articleFav,{id:this.articleId,action:2})];case 1:return e.sent(),$("#favArticleList").find("li").forEach(function(e){$(e).data("id")==t.articleId&&$(e).remove()}),$(".sureDialog").hide(),0==$("#favArticleList li").length&&('<div class="pageNull">\n                            <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                            <p class="txt">您暂无收藏的文章哦</p>\n                        </div>',$("#favArticleList").html('<div class="pageNull">\n                            <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                            <p class="txt">您暂无收藏的文章哦</p>\n                        </div>')),[2]}})})})}),[4,v.Net.getData(v.Api.favRoomList)];case 2:for(n=e.sent(),this.favRoomList(n.list),o=null,i=$("#favArticleList li"),a=0;a<i.length;a++)i[a].addEventListener("touchstart",function(e){$(e.target).hasClass("del-btn")||(s=e.changedTouches[0].pageX,c=e.changedTouches[0].pageY,f=d=!0,o&&(o.className=""))}),i[a].addEventListener("touchmove",function(e){l=e.changedTouches[0].pageX,u=e.changedTouches[0].pageY,d&&0<Math.abs(l-s)-Math.abs(u-c)&&(e.stopPropagation(),10<l-s&&(e.preventDefault(),this.className=""),10<s-l&&(e.preventDefault(),this.className="edit",o=this),f=!1),f&&Math.abs(l-s)-Math.abs(u-c)<0&&(d=!1)});for(null,r=$("#roomList li"),a=0;a<r.length;a++)r[a].addEventListener("touchstart",function(e){$(e.target).hasClass("del-btn")||(s=e.changedTouches[0].pageX,c=e.changedTouches[0].pageY,f=d=!0,o&&(o.className="roomItem"))}),r[a].addEventListener("touchmove",function(e){l=e.changedTouches[0].pageX,u=e.changedTouches[0].pageY,d&&0<Math.abs(l-s)-Math.abs(u-c)&&(e.stopPropagation(),10<l-s&&(e.preventDefault(),this.className="roomItem"),10<s-l&&(e.preventDefault(),this.className="roomItem edit",o=this),f=!1),f&&Math.abs(l-s)-Math.abs(u-c)<0&&(d=!1)});return $("#roomList").on("click",".del-btn",function(){var e=this;$(".sureDialog").show(),this.roomId=$(this).parent().data("id"),$(".del").click(function(){return p(e,void 0,void 0,function(){var t=this;return h(this,function(e){switch(e.label){case 0:return[4,v.Net.getData(v.Api.roomFav,{id:this.roomId,action:2})];case 1:return e.sent(),$("#roomList").find("li").forEach(function(e){$(e).data("id")==t.roomId&&$(e).remove()}),$(".sureDialog").hide(),0==$("#roomList li").length&&('<div class="pageNull">\n                            <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                            <p class="txt">您暂无收藏的文章哦</p>\n                        </div>',$("#roomList").html('<div class="pageNull">\n                            <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                            <p class="txt">您暂无收藏的文章哦</p>\n                        </div>')),[2]}})})})}),this.setLazyLoad(),[2]}})})},e.prototype.onClick=function(e){switch(e.target.className){case"cancle":this.cancle()}},e.prototype.favArticleList=function(e){var t="";if(0!=e.length){for(var n=0;n<e.length;n++)t+=' <li data-id="'+e[n].id+'">\n                    <a href="javascript:void(0);">\n                        <img class="lazy"  data-src="'+(a.default.imgBase+e[n].src)+'">\n                    </a>\n                    <div class="right relative">\n                        <h3>'+e[n].title+'</h3>\n                        <a href="javascript:void(0);" class="btn_red get-btn absolute">立即查看</a>\n                    </div>\n                    <em class="del-btn absolute">\n                        删除\n                    </em>\n                </li>';$("#favArticleList").html(t),$("#favArticleList").on("click",".btn_red",function(){location.href="#newsContent?id="+$(this).parent().parent().data("id")})}else{$("#favArticleList").html('<div class="pageNull">\n                     <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                     <p class="txt">您暂无收藏的文章哦</p>\n                 </div>')}},e.prototype.favRoomList=function(e){var t="";if(0!=e.length){for(var n=0;n<e.length;n++){var o=e[n].low_coin/100;e[n].src&&(t+='<li class="roomItem" data-id="'+e[n].id+'">\n                    <a>\n                        <img class="lazy" data-src="'+(a.default.imgBase+e[n].src)+'" alt="">\n                    </a>\n                    <div class="item-msg">\n                        <div class="left">\n                            <h3 class="font-clip">'+e[n].title+'</h3>\n                            <span class="flex">\n                                <em class="price f26">魅力币：'+parseInt(o)+'</em>\n                                <del class="f22">专柜价：￥'+e[n].discount+'</del>\n                            </span>\n                        </div>\n                        <div class="right" id="favRoom">\n                            <a  href="javascript:void(0);" class="btn_red need-btn f26" data-id="'+e[n].id+'" >我要这支</a>\n                        </div>\n                    </div>\n                    <i class="absolute game-status f20 font-clip">\n                        2000人游戏中\n                    </i>\n                    <em class="del-btn absolute">\n                        删除\n                    </em>\n                </li>')}$("#roomList").html(t),$("#roomList").on("click",".btn_red",function(){location.href="#gameInner?id="+$(this).data("id")})}else{$("#roomList").html('<div class="pageNull">\n                     <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                     <p class="txt">您暂无收藏的场次哦</p>\n                 </div>')}},e.prototype.cancle=function(){$(".sureDialog").hide(),this.node.find("li").removeClass("edit")},e.prototype.setEdit=function(){this.node.find("li").hasClass("edit")?this.node.find("li").removeClass("edit"):this.node.find("li").addClass("edit")},e.prototype.setLazyLoad=function(){lazyload($(".lazy"))},e}(r.default);n.default=s},{"../../common/Config":3,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],28:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){function t(){var e=document.querySelector("#txtClipboard"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功")}catch(e){console.log("复制失败")}}var i;return a(this,function(e){return i=this,$("#goBack").on("click",function(){c.default.viewManager.openView(l.default.personal)}),document.querySelector("#copy").addEventListener("click",t,!1),[2]})})},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#customer").append(t),setTimeout(function(){$("#toast").remove()},600)},t.prototype.onClick=function(e){console.log(e)},t}(s.default);n.default=u},{"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],29:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/Net"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return $("#goBack").on("click",function(){c.default.viewManager.openView(l.default.personal),window.history.pushState(null,"","#personal")}),[4,u.Net.getData(u.Api.messageList)];case 1:return t=e.sent(),this.setMessList(t.list||[]),[2]}})})},t.prototype.setMessList=function(e){var t="";if(0!=e.length){for(var n=0;n<e.length;n++){var o=0==e[n].type?"系统":"客服",i=0==e[n].type?"":"type_custom_service";t+='<li data-id="'+e[n].id+'">\n                    <i class="icon type type_sys '+i+'" ><span>'+o+"</span></i>\n                    <div class=\"header\">\n                        <span class='title'>"+e[n].c_time+"</span>\n                        <span class='time'>"+(1==e[n].flag?"已读":"未读")+"</span>\n                    </div>\n                    <div class=\"content\">\n                        <p class='sub_title'>"+e[n].title+"</p>\n                        <p class='detail'>\n                            <span  class='detail_btn'>查看</span>\n                            <i class='icon arrow'></i>\n                        </p>\n                    </div>\n                </li>"}$("#emailList").html(t),$("#emailList").on("click","li",function(){c.default.viewManager.openView(l.default.newsInfo,{id:$(this).data("id")})})}else{$("#emailList").html('<div class="pageNull">\n                    <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                    <p class="txt">您暂时没有收到任何消息哦</p>\n                </div>')}},t}(s.default);n.default=d},{"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],30:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},f=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),p=e("../component/Slider"),h=e("../../core/Core"),m=e("../../common/EventType"),g=e("../../common/ViewConfig"),a=e("../../common/Config"),v=e("../../common/Net"),y=e("../../core/Utils"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onCreate=function(){this.setBanner()},t.prototype.setBanner=function(){var e=this.data.bannerList,t="";for(var n in e){if(!e[n].src)return;t+='<em><a href="'+e[n].link+'" lazy="'+(a.default.imgBase+e[n].src)+'"></a></em>'}this.template=h.default.utils.replaceData("banner",this.template,t)},t.prototype.onEnable=function(){return d(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功"),$(".broswerDialog").hide()}catch(e){console.log("复制失败")}}var i,n,o,r,a,s,c,l,u=this;return f(this,function(e){switch(e.label){case 0:return this.slide=new p.default("#banner"),this.setLazyLoad(),h.default.eventManager.event(m.default.updateBottomNav,{type:"find"}),i=this,n=navigator.userAgent.toLowerCase(),o=-1!=n.indexOf("micromessenger"),this.linkHref=encodeURIComponent(location.origin+location.pathname+"?page=find"),$("body").on("loginEvent",function(){return d(u,void 0,void 0,function(){var t,n,o;return f(this,function(e){switch(e.label){case 0:return t=this,[4,v.Net.getData(v.Api.userInfo)];case 1:return t.userInfo=e.sent(),n=isNaN(parseInt(this.userInfo.coin))?0:parseInt(this.userInfo.coin),o=parseInt(n/100),$(".rechargeBtn em").text(o),this.shareL(),[2]}})})}),r=this,[4,v.Net.getData(v.Api.userInfo)];case 1:return r.userInfo=e.sent(),this.userInfo&&(a=isNaN(parseInt(this.userInfo.coin))?0:parseInt(this.userInfo.coin),s=parseInt(a/100),$(".rechargeBtn em").text(s)),this.node.on("click",".rechargeBtn",function(){u.userInfo?(h.default.viewManager.openView(g.default.recharge),window.history.pushState(null,"","#recharge")):$(".loginDialog").show()}),[4,v.Net.getData(v.Api.findList)];case 2:return c=e.sent(),this.setFindList(c.list),$(".shareDialog").on("touchmove",function(){event.preventDefault()}),$("#banner em").eq(0).find("a").click(function(){$(this).attr("href","javascript:;"),i.userInfo?($(".broswerDialog").show(),$("body,html").css({overflow:"hidden"})):$(".loginDialog").show()}),$(".shareDialog").click(function(){$(".shareDialog").hide(),$("body,html").css({overflow:"auto"})}),o?[4,y.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,5];case 3:return e.sent(),[4,v.Net.getData(v.Api.wxJsdk)];case 4:l=e.sent(),wx.config({appId:l.appId,timestamp:l.timestamp,nonceStr:l.nonceStr,signature:l.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=5;case 5:return this.shareL(),document.querySelector("#broswerCopyBtn").addEventListener("click",t,!1),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),this.setLazyLoad(),[2]}})})},t.prototype.shareL=function(){var t=-1!=navigator.userAgent.toLowerCase().indexOf("micromessenger");$.ajax({type:"get",dataType:"json",url:v.Api.codeShare.url+"?redirect_uri="+this.linkHref,xhrFields:{withCredentials:!0},success:function(e){t?wx.ready(function(){wx.onMenuShareTimeline({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}})}):$("#shareTxt-copy").val(e.mes.url)}})},t.prototype.setFindList=function(e){for(var t="",n=0;n<e.length;n++)t+='<li data-id="'+e[n].id+'" >\n                    <a href="javascript:void(0);">\n                         <img class="lazy" src="" data-src="'+(a.default.imgBase+e[n].src)+'" alt="">\n                        <h3 class="font-clipLine">'+e[n].title+'</h3>\n                        <span class="hot-status f18"><i class="icon"></i><em>'+e[n].browse+"</em></span>\n                    </a>\n                </li>";$("#findList").html(t),$("#findList").on("click","li",function(){location.href="#newsContent?id="+$(this).data("id")})},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#find").append(t),setTimeout(function(){$("#toast").remove()},600)},t.prototype.setLazyLoad=function(){lazyload($(".lazy"))},t.prototype.onClick=function(e){},t.prototype.onUpdate=function(){},t.prototype.onRemove=function(){$(".loginDialog").hide(),console.log("find界面关闭"),this.slide.clearTime(),this.slide=null},t}(r.default);n.default=s},{"../../common/Config":3,"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14,"../component/Slider":19}],31:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/Net"),d=e("../../common/UserData"),f=e("../../core/Utils"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var t,n,o,i;return a(this,function(e){switch(e.label){case 0:return this.setLazyLoad(),this.node.on("click",".closeSelf",function(){c.default.viewManager.closeView(l.default.friendRecharge)}),[4,u.Net.getData(u.Api.userInfo)];case 1:return t=e.sent(),[4,u.Net.getData(u.Api.recharge)];case 2:return n=e.sent(),this.setRecharge(n.rechargeList),$("#friendRecharges").on("click","li",function(){$(this).addClass("cur").siblings().removeClass("cur")}),[4,f.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})];case 3:return e.sent(),[4,u.Net.getData(u.Api.wxJsdk)];case 4:return o=e.sent(),i=encodeURIComponent(location.origin+location.pathname+"?page=shareFriendRecharge&to_uid="+t.uid),wx.config({appId:o.appId,timestamp:o.timestamp,nonceStr:o.nonceStr,signature:o.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),$.ajax({type:"get",dataType:"json",url:u.Api.codeShare.url+"?redirect_uri="+i,xhrFields:{withCredentials:!0},success:function(e){wx.ready(function(){wx.onMenuShareTimeline({title:"小哥哥，我要这只口红，给我买！",desc:"点唇以红，口脂凝香，口红之于女人的意义，不仅仅是恋人用来证明“我爱你”，更是女人的灵魂，最有魅力的彩妆，做精致的女人，即使天塌下来，还有口红呢！",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/share1.jpg",success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:"小哥哥，我要这只口红，给我买！",desc:"点唇以红，口脂凝香，口红之于女人的意义，不仅仅是恋人用来证明“我爱你”，更是女人的灵魂，最有魅力的彩妆，做精致的女人，即使天塌下来，还有口红呢！",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/share1.jpg",success:function(){$(".shareDialog").hide()}})})}}),$(".shareDialog").on("touchmove",function(){event.preventDefault()}),$(".okRechargeBtn").click(function(){$("body,html").css({overflow:"hidden"}),$(".shareDialog").show()}),$(".shareDialog").click(function(){$("body,html").css({overflow:"auto"}),$(".shareDialog").hide()}),this.setLazyLoad(),[2]}})})},t.prototype.setRecharge=function(e){for(var t="",n=0;n<e.length;n++){var o=e[n].goodsList;if(1==d.default.firstRecharge){for(var i=0;i<o.length;i++)if(151==o[i].attribute_id){var r=e[n].money_coin/100+e[n].money_coin/100*(o[i].goods_company/100)*o[i].num;t+='<li class="item firstCZ" data-price="'+e[n].amount/100+'">\n                                <a href="javascript:void(0)">\n                                <p class="price">\n                                    <span class="mon"><em>¥</em>'+e[n].amount/100+'</span>\n                                    <span class="num">'+o[i].title+'</span>\n                                </p>\n                                <p class="txtTo">共'+parseInt(r)+"魅力币</p>\n                            </a></li>"}}else for(i=0;i<o.length;i++)153==o[i].attribute_id&&(t+='<li class="item hzCz" data-price="'+e[n].amount/100+'">\n                                <a href="javascript:void(0)">\n                                <p class="price">\n                                    <span class="mon"><em>¥</em>'+e[n].amount/100+'</span>\n                                    <span class="num">'+o[i].title+'</span>\n                                </p>\n                                <p class="txtTo">共'+(parseInt(e[n].money_coin)/100+o[i].goods_company/100*o[i].num)+"魅力币</p>\n                            </a></li>")}$("#friendRecharges").html(t)},t.prototype.setLazyLoad=function(){lazyload($(".lazy"))},t.prototype.onClick=function(e){console.log(e)},t}(s.default);n.default=p},{"../../common/Net":6,"../../common/UserData":7,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],32:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},p=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/EventType"),a=e("../../common/ErrorMap"),h=e("../../common/Net"),u=e("../../common/ViewConfig"),d=e("../../core/Utils"),s=e("../../common/UserData"),m=e("../../common/Config"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCloseAnimation=!0,e.gameStart=!1,e.touch=!1,e.itemList=[],e.itemId=0,e.interval=0,e.speed=0,e.lipstickSpeed=2,e.rotate=0,e.pass=0,e}return i(e,t),e.prototype.onAwake=function(){},e.prototype.onEnable=function(){return f(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy1"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功"),$(".broswerDialog").hide()}catch(e){console.log("复制失败")}}var i,n,o,r,a,s=this;return p(this,function(e){switch(e.label){case 0:return this.itemBox=$("#itemBox"),c.default.eventManager.on(l.default.error,this,this.onError),c.default.eventManager.event(l.default.viewScroll,!0),c.default.eventManager.event(l.default.gameInnerState,!1),$(".prizePlay").hide(),this.node.on("click","#chooseColorBtn",function(){s.setWinViewState(!1),s.endDate?s.openRewards(s.endDate.list,s.endDate.gameCode):console.error("丢失结束接口的数据!")}),this.node.on("click",".closeSelf",function(){c.default.viewManager.closeView(u.default.gameElude),c.default.eventManager.event(l.default.updateBottomNav,{hide:!0})}),this.node.on("click","#goOther",function(){window.location.href="#"}),this.node.on("click","#shareBtn",function(){(_czc||[]).push(["_trackEvent","躲避游戏分享","躲避分享海报"]),s.onShareImage()}),this.node.on("click","#rewardBoxBtn",function(){c.default.viewManager.openView(u.default.awardsBox),c.default.viewManager.closeView(u.default.gameElude)}),this.node.on("click","#shareBtn2",function(){$("#shareDialogGame").show(),h.Net.getData(h.Api.roomShare,{id:s.dataSource.roomId})}),this.node.on("click","#shareDialogGame",function(){$("#shareDialogGame").hide()}),this.node.on("touchstart",function(e){s.onTuchStart()}),this.lipstickNode={node:$("#eludeLipstick"),x:0,y:300},this.setLipstick(this.node.width()/2-30),$("#startBtn").on("click",function(){$("#gameDesc").addClass("hide"),s.start()}),i=this,n=navigator.userAgent.toLowerCase(),(o=-1!=n.indexOf("micromessenger"))?[4,d.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,3];case 1:return e.sent(),[4,h.Net.getData(h.Api.wxJsdk)];case 2:r=e.sent(),wx.config({appId:r.appId,timestamp:r.timestamp,nonceStr:r.nonceStr,signature:r.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=3;case 3:return window.location.href,a=encodeURIComponent(location.origin+location.pathname+"?page=index"),$.ajax({type:"get",dataType:"json",url:h.Api.codeShare.url+"?redirect_uri="+a,xhrFields:{withCredentials:!0},success:function(e){console.log(e),o?wx.ready(function(){wx.onMenuShareTimeline({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialogs").hide()}}),wx.onMenuShareAppMessage({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialogs").hide()}})}):($("#shareTxt-copy1").val(e.mes.url),console.log(e.mes.url,$("#shareTxt-copy1").val()))}}),document.querySelector("#broswerCopyBtn1").addEventListener("click",t,!1),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),$(".shareDialogs").click(function(){$(".shareDialogs").hide()}),$("#creditDialogs .close").click(function(){$("#creditDialogs").hide(),c.default.viewManager.closeView(u.default.recharge)}),$(".inviteBtn").click(function(){if(o)return $(".shareDialogs").show(),void $("#creditDialogs").hide();$("#creditDialogs").hide(),$(".broswerDialog").show()}),[2]}})})},e.prototype.onClick=function(t){return f(this,void 0,void 0,function(){return p(this,function(e){switch(t.target.id){case"replay":this.replay()}return[2]})})},e.prototype.start=function(){return f(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return!this.dataSource||this.dataSource.sn?[3,2]:[4,h.Net.getData(h.Api.gameStart,{gid:this.dataSource.gid,roomId:this.dataSource.roomId,sign:this.dataSource.sign,apiKey:this.dataSource.apiKey})];case 1:if(!(t=e.sent()))return console.error("数据异常"),[2];this.dataSource.sn=t.sn,this.dataSource.coin=t.coin,s.default.preset=t.reStatus,e.label=2;case 2:return this.gameStart=!0,this.setProgress(1),[2]}})})},e.prototype.over=function(){return f(this,void 0,void 0,function(){var t,n;return p(this,function(e){switch(e.label){case 0:return this.gameStart=!1,this.touch=!1,this.itemId=0,this.clearCountDown(),this.dataSource?($("#loseView").find("h6").text("闯关失败"),$("#loseView").find("#replay").html("再玩一次"),[4,h.Net.getData(h.Api.gameEnd,{roomId:this.dataSource.roomId,sn:this.dataSource.sn,step:this.progress,status:this.pass?1:2})]):((t=$("#loseView")).find("h6").text(""),t.find("p").text("试玩结束"),t.show(),t.find("#replay").html("确定"),[2]);case 1:return n=e.sent(),(this.endDate=n)?(this.pass?this.setWinViewState(!0):(this.setOverViewState(!0,n.list[0]),$("#loseView").find("em").css("display","none"),parseInt(n.coin)<10&&parseInt(n.give_coin)&&$("#loseView").find("em").css("display","inline-block")),[2]):(console.error("数据异常"),confirm("数据错误，请联系客服"),c.default.viewManager.closeView(u.default.gameElude),c.default.eventManager.event(l.default.updateBottomNav,{hide:!0}),[2])}})})},e.prototype.replay=function(){return f(this,void 0,void 0,function(){var t,n;return p(this,function(e){switch(e.label){case 0:return this.dataSource?[4,h.Net.getData(h.Api.userInfo,{roomId:this.dataSource.roomId,game:1})]:[3,3];case 1:return t=e.sent(),[4,h.Net.getData(h.Api.gameStart,{gid:this.dataSource.gid,roomId:this.dataSource.roomId,sign:t.gameInfo.sign,apiKey:t.gameInfo.apiKey})];case 2:return(n=e.sent())?(s.default.preset=n.reStatus,this.dataSource={gid:this.dataSource.gid,apiKey:t.gameInfo.apiKey,sign:t.gameInfo.sign,roomId:this.dataSource.roomId,goodsId:t.gameInfo.goodsId,sn:n.sn,coin:n.coin,costCoin:this.dataSource.costCoin},this.start(),this.setOverViewState(!1),[3,4]):(console.error("数据异常"),[2]);case 3:c.default.viewManager.closeView(u.default.gameElude),c.default.eventManager.event(l.default.updateBottomNav,{hide:!0}),e.label=4;case 4:return[2]}})})},e.prototype.onTuchStart=function(){this.gameStart&&(this.rotate=this.rotate?0:180)},e.prototype.setProgress=function(e){var t=this;switch(this.progress=e,this.touch=!1,this.clearItem(),this.progress){case 1:this.progressInterval=60;break;case 2:this.progressInterval=2==s.default.preset?30:45;break;case 3:if(!this.dataSource)return void this.over();2==s.default.preset?this.progressInterval=15:this.progressInterval=30}$(".progress-box").find("div").eq(this.progress-1).addClass("cur").siblings().removeClass("cur");var n=$("#progressIcon");n.css({opacity:"0",transform:"translate3d(0, -1.5rem, 0)"}),n.removeClass("hide"),n.removeClass("icon_1"),n.removeClass("icon_2"),n.removeClass("icon_3"),n.addClass("icon_"+e),n.animate({opacity:1,transform:"translate3d(0, 0, 0)"},600,"ease"),this.preesTimeOut&&clearTimeout(this.preesTimeOut),this.preesTimeOut=setTimeout(function(){n.animate({opacity:0,transform:"translate3d(0, 1.5rem, 0)"},600,"ease",function(){n.addClass("hide"),t.createCountDown(),t.touch=!0})},2e3)},e.prototype.setLipstick=function(e,t){(this.lipstickNode.x=e)+45>this.node.width()?this.rotate=180:e<0&&(this.rotate=0),this.lipstickNode.node.css("transform","translate3d("+this.lipstickNode.x+"px, "+this.lipstickNode.y+"px, 0) rotate("+this.rotate+"deg)")},e.prototype.addItem=function(){this.itemBox.find(".item-content").append('<i id="item'+this.itemId+'" class="item-'+Math.ceil(3*Math.random())+' absolute"></i>'),this.itemList.push({node:this.itemBox.find("#item"+this.itemId),x:Math.ceil(Math.random()*(this.node.width()/90)*90),y:0,speed:3==this.progress?2==s.default.preset?2:4:2}),this.itemId++},e.prototype.clearItem=function(){this.itemList=[],this.itemBox.find(".item-content").empty()},e.prototype.openRewards=function(t,n){var e=$("#rewards"),o=$("#getReward"),i=e.find("#itemList"),r=this;i.html("");for(var a="",s=0,c=t.length;s<c;s++)a+="<li data-id="+t[s].id+'>\n            <img class="lazy" src="'+(m.default.imgBase+t[s].src)+'" alt="">\n            <h3 class="font-clip">'+t[s].title+"</h3>\n        </li>";i.html(a),e.show(),e.css({opacity:0}),e.animate({opacity:1},300,null,function(){});var l,u=$("#chooseLipstick");u.find("img")[0].src="",e.on("click","li",function(){l=$(this).index(),u.find("img")[0].src=m.default.imgBase+t[l].src,u.find(".font-clip").text(t[l].title),$(this).addClass("cur").siblings().removeClass("cur"),u.addClass("fadeIn")}),e.on("click","button",function(){return f(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,h.Net.getData(h.Api.gameReward,{gameCode:n,id:t[l].id})];case 1:return e.sent(),o.find("img")[0].src=m.default.imgBase+t[l].src,o.find(".name").html(t[l].title),r.rewadObj=t[l],$("#chooseLpstick").addClass("fadeIn"),o.show(),[2]}})})});var d=this;o.on("click","button",function(){d.onShareImage(),console.log("分享功能")})},e.prototype.closeRewards=function(){$("#rewards").off()},e.prototype.setWinViewState=function(e){var t=$("#winView");e?t.show():t.hide()},e.prototype.setOverViewState=function(e,t){var n=$("#loseView");if(!t&&e)return alert("服务器没有返回数据"),c.default.viewManager.closeView(u.default.gameElude),void c.default.eventManager.event(l.default.updateBottomNav,{hide:!0});e?(n.find("p").text(t.title),n.show()):n.hide()},e.prototype.updateCountLabel=function(e){$("#countDown").text(e+""),$("#countDownBox").css("width",.174*e+.8+"rem")},e.prototype.createCountDown=function(){var t=this;if(this.gameStart){this.clearCountDown();var n=30;this.updateCountLabel(n),this.countDown=setTimeout(function e(){console.log(22);n--;t.updateCountLabel(n);if(n<=0){if(t.progress++,3<t.progress){if(t.progress=3,2==s.default.preset)return alert("数据非法，请勿使用任何作弊手段。违者追究法律责任!!!"),t.gameStart=!1,t.touch=!1,t.itemId=0,t.clearCountDown(),c.default.viewManager.closeView(u.default.gameElude),void c.default.eventManager.event(l.default.updateBottomNav,{hide:!0});t.pass=1,t.over(),console.log("通关了"),n=0,$(".progress-box").find("div").eq(3).addClass("cur").siblings().removeClass("cur")}else t.pass=0,t.setProgress(t.progress);return}t.clearCountDown();n&&(t.countDown=setTimeout(e,1e3))},1e3)}},e.prototype.clearCountDown=function(){this.countDown&&clearTimeout(this.countDown)},e.prototype.onUpdate=function(){if(this.gameStart&&this.touch){this.interval++,this.interval>=this.progressInterval&&(this.addItem(),this.interval=0);for(var e=this.itemList.length-1;-1<e;e--)this.itemList[e].y+=this.itemList[e].speed,this.itemList[e].node.css("transform","translate3d("+this.itemList[e].x+"px,"+this.itemList[e].y+"px,0)"),1e3<this.itemList[e].y&&(this.itemList[e].node.remove(),this.itemList.splice(e,1),e++),d.default.getPositionLength({x:this.lipstickNode.x+this.lipstickNode.node.width()/2,y:this.lipstickNode.y+this.lipstickNode.node.width()/2},{x:this.itemList[e].x+this.itemList[e].node.width()/2,y:this.itemList[e].y+this.itemList[e].node.width()/2})<this.itemList[e].node.width()/2+this.lipstickNode.node.width()/2&&this.over();this.rotate?this.lipstickNode.x-=this.lipstickSpeed:this.lipstickNode.x+=this.lipstickSpeed,this.setLipstick(this.lipstickNode.x)}},e.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#gameElude").append(t),setTimeout(function(){$("#toast").remove()},600)},e.prototype.onError=function(e){if(e.data.code!=a.default._6004){if(e.data.code==a.default._6005)return e.data.code==a.default._6005?(c.default.viewManager.closeView(u.default.gameElude),void c.default.eventManager.event(l.default.updateBottomNav,{hide:!0})):void 0;alert(e.data.mes)}},e.prototype.onShareImage=function(){s.default.avatar||alert("头像地址丢失，请联系客服!"),d.default.mergeImage({width:750,hieght:1220,images:[{src:"/res/other/poster-bg.jpg"},{src:m.default.imgBase+this.rewadObj.src,width:240,height:240,x:250,y:540},{src:s.default.avatar,width:90,height:90,x:330,y:260},{src:"/res/other/customer.jpg",width:190,height:190,x:292,y:928}],texts:[{string:s.default.userName,color:"#000",fontSize:24,x:375-24*s.default.userName.length/2,y:390},{string:"在口红姬游戏挑战中获得",color:"#EC4A57",fontSize:30,x:210,y:450},{string:this.rewadObj.title,color:"#EC4A57",fontSize:30,x:375-30*this.rewadObj.title.length/2,y:490}]}).then(function(e){$("#shareImg").show(),$("#shareImg").find("img")[0].src=e})},e.prototype.onRemove=function(){this.gameStart=!1,this.touch=!1,this.itemId=0,this.clearCountDown(),this.preesTimeOut&&clearTimeout(this.preesTimeOut),clearInterval(),c.default.eventManager.event(l.default.viewScroll,!1),c.default.eventManager.event(l.default.updateGameInnerUser),this.node.off(),c.default.eventManager.event(l.default.gameInnerState,!0),c.default.eventManager.off(l.default.error,this.onError)},e}(r.default);n.default=g},{"../../common/Config":3,"../../common/ErrorMap":4,"../../common/EventType":5,"../../common/Net":6,"../../common/UserData":7,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],33:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},p=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),h=e("../../core/Core"),m=e("../../core/Utils"),g=e("../../common/Net"),v=e("../../common/ViewConfig"),y=e("../../common/Config"),w=e("../../common/UserData"),b=e("../../common/EventType"),a=e("../../common/ErrorMap"),_=e("../../common/AudioRes"),x=e("../component/Login"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sendGame=!1,e.roomId=m.default.getValueByUrl("id"),e}return i(e,t),e.prototype.onCreate=function(){h.default.viewManager.closeView(v.default.recharge)},e.prototype.onEnable=function(){return f(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功"),$(".broswerDialog").hide()}catch(e){console.log("复制失败")}}var i,n,o,r,a,s,c,l,u,d=this;return p(this,function(e){switch(e.label){case 0:return this.sendGame=!1,h.default.viewManager.closeView(v.default.recharge),h.default.eventManager.on(b.default.error,this,this.onError),$("#goBack").on("click",function(){h.default.preView?window.history.go(-1):location.href="#"}),i=this,n=navigator.userAgent.toLowerCase(),o=-1!=n.indexOf("micromessenger"),new x.default,$("body").on("loginEvent",function(){return f(d,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this.getUserData()];case 1:return e.sent(),i.roomData,[2]}})})}),r=this,[4,g.Net.getData(g.Api.userInfo)];case 1:return r.personInfo=e.sent(),h.default.eventManager.on(b.default.gameInnerState,this,this.onGameInnerState),this.onGameInnerState(!0),a=m.default.getValueByUrl("id"),[4,g.Net.getData(g.Api.roomInfo,{id:a})];case 2:return s=e.sent(),this.setItemList(s.goodsList),this.setBanner(s.bannerList),h.default.eventManager.on(b.default.updateGameInnerUser,this,this.getUserData),this.personInfo?[4,this.getUserData()]:[3,4];case 3:e.sent(),e.label=4;case 4:return $("#gameStartBtn").on("click",function(){return f(d,void 0,void 0,function(){var t,n,o,i,r;return p(this,function(e){switch(e.label){case 0:if((_czc||[]).push(["_trackEvent","开始随机闯关","随机闯关"]),m.default.playSound(_.default.hit),this.sendGame)return[2];if(this.sendGame=!0,(t=this.roomData)||$(".loginDialog").show(),!(n=s.gameList).length)return alert("游戏列表丢失!"),[2];switch(o=n[Math.floor(Math.random()*n.length)],i="game",o.id){case"1":i="game";break;case"2":i="gameElude";break;case"3":i="gameNumber"}return"game"!=i?(h.default.viewManager.openView(v.default[i],{gid:o.id,apiKey:t.gameInfo.apiKey,sign:t.gameInfo.sign,roomId:a,goodsId:t.gameInfo.goodsId,sn:null,coin:null,progress:0<parseInt(t.ticketInfo.num)?3:1,costCoin:parseInt(s.low_coin)}),this.sendGame=!1,[2]):[4,g.Net.getData(g.Api.gameStart,{gid:o.id,roomId:a,sign:t.gameInfo.sign,apiKey:t.gameInfo.apiKey})];case 1:return r=e.sent(),w.default.preset=r.reStatus,this.sendGame=!1,h.default.viewManager.openView(v.default[i],{gid:o.id,apiKey:t.gameInfo.apiKey,sign:t.gameInfo.sign,roomId:a,goodsId:t.gameInfo.goodsId,sn:r.sn,coin:r.coin,progress:0<parseInt(t.ticketInfo.num)?3:1,costCoin:parseInt(s.low_coin)}),[2]}})})}),c=this,[4,g.Net.getData(g.Api.roomFav,{id:a,action:3})];case 5:return c.favNum=e.sent(),this.favNum&&1==this.favNum.collect&&$("#fav").addClass("shareCur"),o?[4,m.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,8];case 6:return e.sent(),[4,g.Net.getData(g.Api.wxJsdk)];case 7:l=e.sent(),wx.config({appId:l.appId,timestamp:l.timestamp,nonceStr:l.nonceStr,signature:l.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=8;case 8:return u=encodeURIComponent(location.origin+location.pathname+"?page=gameInner&id="+m.default.getValueByUrl("id")),$.ajax({type:"get",dataType:"json",url:g.Api.codeShare.url+"?redirect_uri="+u,xhrFields:{withCredentials:!0},success:function(e){o?wx.ready(function(){wx.onMenuShareTimeline({title:s.title,desc:s.depict,link:e.mes.url,imgUrl:y.default.imgBase+s.bannerList[0].src,success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:s.title,desc:s.depict,link:e.mes.url,imgUrl:y.default.imgBase+s.bannerList[0].src,success:function(){$(".shareDialog").hide()}})}):$("#shareTxt-copy").val(e.mes.url)}}),document.querySelector("#broswerCopyBtn").addEventListener("click",t,!1),$("#shareA").click(function(){return f(d,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return(_czc||[]).push(["_trackEvent","发现页分享","分享"]),this.roomData?o?($(".shareDialog").show(),[2]):($(".broswerDialog").show(),[4,g.Net.getData(g.Api.roomShare,{id:a})]):($(".loginDialog").show(),[2]);case 1:return e.sent(),[2]}})})}),$(".shareDialog").click(function(){$(".shareDialog").hide(),$("#shareA").removeClass("shareCur")}),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),this.node.on("click","#rechargeBtn",function(){(_czc||[]).push(["_trackEvent","发现页充值","充值"]),i.roomData?h.default.viewManager.openView(v.default.recharge):$(".loginDialog").show()}),o?$(".txtFav1").show():$(".txtFav1").hide(),$("#creditDialog .close").click(function(){$("#creditDialog").hide(),h.default.viewManager.closeView(v.default.recharge)}),$(".inviteBtn").click(function(){if(o)return $(".shareDialog").show(),void $("#creditDialog").hide();$(".broswerDialog").show(),$("#creditDialog").hide()}),$(".innerGnameBox").html(s.content),$(".innerGnameBox").on("click",".tryBtn",function(e){(_czc||[]).push(["_trackEvent","发现试玩","试玩"]),m.default.playSound(_.default.hit);var t="game";switch($(e.currentTarget).parents(".swiper-slide").data("swiper-slide-index")){case 1:t="gameNumber";break;case 0:t="gameElude"}h.default.viewManager.openView(v.default[t])}),[4,m.default.ajax({url:"/src/swiper.min.3.1.js",dataType:"script"})];case 9:return e.sent(),new Swiper(".gameC-banner",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",loop:!0,autoplay:5e3}),$(".game-Tab li").click(function(){var e=$(this).index();$(this).addClass("cur").siblings().removeClass("cur"),$(".game-Tabcon .wrapCon").eq(e).show().siblings().hide()}),[2]}})})},e.prototype.getUserData=function(){return f(this,void 0,void 0,function(){var t=this;return p(this,function(e){return[2,new Promise(function(n){return f(t,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return[4,g.Net.getData(g.Api.userInfo,{roomId:m.default.getValueByUrl("id"),game:1})];case 1:return t=e.sent(),this.roomData=t,$("#gameStartBtn").text(0<parseInt(t.ticketInfo.num)?"直通挑战第3关":"开始随机闯关"),n(t),[2]}})})})]})})},e.prototype.setBanner=function(e){for(var t=0,n=e.length;t<n;t++)e[t].src&&'<img class="lazy" data-src="'+(y.default.imgBase+e[t].src)+'" />';lazyload($(".lazy"))},e.prototype.setItemList=function(e){for(var t="",n=0,o=e.length;n<o;n++)t+='<li class="item">\n            <img class="lazy" data-src="'+(y.default.imgBase+e[n].src)+'" alt="">\n            <p>'+e[n].title+"</p>\n        </li>";$("#contBox").html(t),lazyload($(".lazy"))},e.prototype.favVote=function(){return f(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return(t=this.node.find("#fav")).hasClass("shareCur")?t.removeClass("shareCur"):t.addClass("shareCur"),t.hasClass("shareCur")?this.favId=1:this.favId=2,[4,g.Net.getData(g.Api.roomFav,{id:m.default.getValueByUrl("id"),action:this.favId})];case 1:return e.sent(),[2]}})})},e.prototype.onError=function(e){if("block"!=$(".loginDialog").css("display")&&e.data.code!=a.default._6004)if(e.data.code!=a.default._6012){if(e.data.code==a.default._6005)return e.data.code==a.default._6005?($("#creditDialog").show(),void $(".reBtn").click(function(){(_czc||[]).push(["_trackEvent","果断充值","点击充值"]),h.default.viewManager.openView(v.default.recharge)})):void 0;alert(e.data.mes)}else this.sendGame=!1},e.prototype.onGameInnerState=function(e){this.node.css("display",e?"block":"none")},e.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#gameInner").append(t),setTimeout(function(){$("#toast").remove()},600)},e.prototype.onClick=function(e){switch(e.target.className){case"icon shareFavico":if((_czc||[]).push(["_trackEvent","发现页点赞","点赞"]),!this.roomData)return void $(".loginDialog").show();this.favVote()}},e.prototype.onRemove=function(){$("#gameStartBtn").off(),$(".loginDialog").hide(),this.slide=null,h.default.eventManager.off(b.default.error,this.onError),h.default.eventManager.off(b.default.updateGameInnerUser,this.getUserData),h.default.eventManager.event(b.default.viewScroll,!1)},e}(r.default);n.default=s},{"../../common/AudioRes":2,"../../common/Config":3,"../../common/ErrorMap":4,"../../common/EventType":5,"../../common/Net":6,"../../common/UserData":7,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14,"../component/Login":18}],34:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},p=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/EventType"),h=e("../../common/Net"),s=e("../../common/UserData"),m=e("../../common/Config"),d=e("../../core/Utils"),g=e("../../common/AudioRes"),a=e("../../common/ErrorMap"),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.angle=0,e.speed=1,e.angles=[],e.addNum=0,e.randomAngle=1,e.start=!1,e.click=!1,e.failed=!1,e.lipstickNumbers=[8,10,13],e.pass=0,e.snakeNum=0,e.playAni=!1,e.shootList=[],e.loseAngle=0,e.gameAddNum=0,e.gameAddNumRandom=1,e.isCloseAnimation=!0,e}return i(e,t),e.prototype.onEnable=function(){return f(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy1"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功"),$("#broswerDialog1").hide()}catch(e){console.log("复制失败")}}var i,n,o,r,a,s=this;return p(this,function(e){switch(e.label){case 0:return c.default.eventManager.on(u.default.error,this,this.onError),c.default.eventManager.event(u.default.viewScroll,!0),c.default.eventManager.event(u.default.gameInnerState,!1),this.dial=$("#dial"),this.node.css({zIndex:100}),this.gameView=$("#gameView"),this.onStart(),$(".prizePlay").hide(),this.node.on("click",".closeSelf",function(){c.default.viewManager.closeView(l.default.game),c.default.eventManager.event(u.default.updateBottomNav,{hide:!0})}),this.node.on("click","#chooseColorBtn",function(){s.setWinViewState(!1),s.endDate?s.openRewards(s.endDate.list,s.endDate.gameCode):console.error("丢失结束接口的数据!")}),this.node.on("click","#goOther",function(){window.location.href="#"}),this.node.on("click","#shareBtn",function(){}),this.node.on("click","#rewardBoxBtn",function(){c.default.viewManager.openView(l.default.awardsBox),c.default.viewManager.closeView(l.default.game)}),i=this,n=navigator.userAgent.toLowerCase(),(o=-1!=n.indexOf("micromessenger"))?[4,d.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,3];case 1:return e.sent(),[4,h.Net.getData(h.Api.wxJsdk)];case 2:r=e.sent(),wx.config({appId:r.appId,timestamp:r.timestamp,nonceStr:r.nonceStr,signature:r.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=3;case 3:return window.location.href,a=encodeURIComponent(location.origin+location.pathname+"?page=index"),$.ajax({type:"get",dataType:"json",url:h.Api.codeShare.url+"?redirect_uri="+a,xhrFields:{withCredentials:!0},success:function(e){console.log(e),o?wx.ready(function(){wx.onMenuShareTimeline({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialogs").hide()}}),wx.onMenuShareAppMessage({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialogs").hide()}})}):($("#shareTxt-copy1").val(e.mes.url),console.log(e.mes.url,$("#shareTxt-copy1").val()))}}),document.querySelector("#broswerCopyBtn1").addEventListener("click",t,!1),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),this.node.on("click","#shareBtn2",function(){$("#shareDialogGame").show(),h.Net.getData(h.Api.roomShare,{id:s.dataSource.roomId})}),this.node.on("click","#shareDialogGame",function(){$("#shareDialogGame").hide()}),$(".shareDialogs").click(function(){$(".shareDialogs").hide()}),$("#creditDialogs .close").click(function(){$("#creditDialogs").hide(),c.default.viewManager.closeView(l.default.recharge)}),$(".inviteBtn").click(function(){if(o)return $(".shareDialogs").show(),void $("#creditDialogs").hide();$("#creditDialogs").hide(),$(".broswerDialog").show()}),document.querySelectorAll(".lazy"),lazyload($(".lazy")),this.dial.find(".dial").css({transform:"scale(0, 0)"}),[2]}})})},e.prototype.onStart=function(){this.endDate=null,this.start=!0,this.setProgressState(),this.dataSource?this.setProgress(this.dataSource.progress?this.dataSource.progress:1):this.setProgress(1),this.failed=!1},e.prototype.init=function(){var e=this;this.angles=[],this.dial.find(".lipstick-box").remove(),this.dial.css({transform:"translateY(0)",opacity:1}),this.dial.find(".dial").css({transform:"scale(0, 0)"});var t={scale:0};new TWEEN.Tween(t).to({scale:1},600).easing(TWEEN.Easing.Back.Out).onUpdate(function(){e.dial.find(".dial").css({transform:"scale("+t.scale+", "+t.scale+")"})}).start().onComplete(function(){e.click=!0,e.setLipstickNumbers(),e.createCountDown(),e.addShootLipstick()})},e.prototype.onOver=function(){return f(this,void 0,void 0,function(){var t,n;return p(this,function(e){switch(e.label){case 0:return this.start?(this.start=!1,this.click=!1,this.clearCountDown(),this.dataSource?($("#loseView").find("h6").text("闯关失败"),$("#loseView").find("#replay").html("再玩一次"),[4,h.Net.getData(h.Api.gameEnd,{roomId:this.dataSource.roomId,sn:this.dataSource.sn,step:this.progress,status:this.pass?1:2})]):((t=$("#loseView")).find("h6").text(""),t.find("p").text("试玩结束"),t.show(),t.find("#replay").html("确定"),[2])):[2];case 1:return n=e.sent(),(this.endDate=n)?(this.pass?this.setWinViewState(!0):(this.setOverViewState(!0,n.list[0]),$("#loseView").find("em").css("display","none"),parseInt(n.coin)<10&&parseInt(n.give_coin)&&$("#loseView").find("em").css("display","inline-block")),[2]):(console.error("数据异常"),confirm("数据错误，请联系客服"),c.default.viewManager.closeView(l.default.game),c.default.eventManager.event(u.default.updateBottomNav,{hide:!0}),[2])}})})},e.prototype.onClick=function(t){return f(this,void 0,void 0,function(){return p(this,function(e){if(this.click&&this.start)this.shoot();else switch(t.target.id){case"replay":this.replay()}return[2]})})},e.prototype.replay=function(){return f(this,void 0,void 0,function(){var t,n;return p(this,function(e){switch(e.label){case 0:return this.failed=!1,this.shootList=[],this.dial.find(".lipstick-box").remove(),this.dial.css({opacity:0}),this.dial.find(".dial").css({transform:"scale(0, 0)"}),this.dataSource?[4,h.Net.getData(h.Api.userInfo,{roomId:this.dataSource.roomId,game:1})]:[3,3];case 1:return t=e.sent(),[4,h.Net.getData(h.Api.gameStart,{gid:this.dataSource.gid,roomId:this.dataSource.roomId,sign:t.gameInfo.sign,apiKey:t.gameInfo.apiKey})];case 2:return(n=e.sent())?(s.default.preset=n.reStatus,this.dataSource={gid:this.dataSource.gid,apiKey:t.gameInfo.apiKey,sign:t.gameInfo.sign,roomId:this.dataSource.roomId,goodsId:t.gameInfo.goodsId,sn:n.sn,coin:n.coin,costCoin:this.dataSource.costCoin},this.onStart(),this.setOverViewState(!1),[3,4]):(console.error("数据异常"),[2]);case 3:c.default.viewManager.closeView(l.default.game),c.default.eventManager.event(u.default.updateBottomNav,{hide:!0}),e.label=4;case 4:return[2]}})})},e.prototype.setProgress=function(e){3!=(this.progress=e)||this.dataSource?(this.setProgressView(),$("#lipstickOuter").empty()):this.onOver()},e.prototype.setOverViewState=function(e,t){var n=$("#loseView");e?(n.find("p").text(t.title),n.show()):n.hide()},e.prototype.setWinViewState=function(e){var t=$("#winView");e?t.show():t.hide()},e.prototype.shoot=function(){if(this.lipsticks){var e=this.addNum,t=$("#current-lipstick-"+e),n=window.innerHeight-(parseFloat(this.dial.css("top").match(/[0-9|\.]+/g)[0])+parseFloat(t.css("bottom").match(/[0-9|\.]+/g)[0]));this.start&&(this.setLipstickStatus(),this.shootList.push([t,0,n-this.dial.css("height").match(/[0-9|\.]+/g)[0]]),this.start&&this.lipsticks&&this.addShootLipstick())}},e.prototype.hitSnake=function(){this.snakeNum=5},e.prototype.collision=function(e){for(var t=this.angles,n=t.length-1;-1<n;n--)if(t[n]+15>e&&e>t[n]-15)return!0;return!1},e.prototype.dialAddLipstick=function(e){this.angles.push(e);var t=c.default.utils.getPositionByAngle(e,2.05,{x:2.05,y:2.05}),n='<div class="lipstick-box absolute" style="left:'+t.x+"rem;top:"+t.y+'rem"><i class="lipstick" style="transform:rotate('+(e-90)+'deg);"></i></div>';this.dial.append(n)},e.prototype.getAngle=function(){var e=this.angle-90;return e=(360-e)%360,Math.ceil(e)},e.prototype.addShootLipstick=function(){this.addNum++;var e="<div id=current-lipstick-"+this.addNum+' class="lipstick-box absolute shoot-lipstick current-lipstick"><i class="lipstick"></i></div>';$("#lipstickOuter").append(e),this.currentLipstick=$("#current-lipstick-"+this.addNum),this.currentLipstick.animate({opacity:1},300)},e.prototype.setLipstickNumbers=function(){if(this.progress){for(var e=this.lipstickNumbers[this.progress-1],t="",n=0;n<e;n++)t+="<i></i>";$("#shootList").html(t),this.lipsticks=e,this.curLipsticks=e}},e.prototype.setLipstickStatus=function(){this.lipsticks--;var e=this.lipstickNumbers[this.progress-1];$("#shootList").find("i").eq(e-this.lipsticks-1).addClass("shoot"),this.lipsticks<=0&&(this.lipsticks=0,this.click=!1)},e.prototype.playDropAnimation=function(){var e=this;if(!this.playAni){this.playAni=!0;var t={y:0,alpha:1};new TWEEN.Tween(t).to({y:1e3,alpha:0},1600).easing(TWEEN.Easing.Back.InOut).onUpdate(function(){e.dial.css({transform:"translateY("+t.y+"px) rotate("+e.angle+"deg)",opacity:t.alpha})}).start().onComplete(function(){e.start&&e.next(),e.playAni=!1}),3==this.progress?(d.default.playSound(g.default.win2),d.default.playSound(g.default.win3)):d.default.playSound(g.default.win)}},e.prototype.next=function(){if(3==this.progress)return 2==s.default.preset?(alert("数据非法，请勿使用任何作弊手段。违者追究法律责任!!!"),c.default.viewManager.closeView(l.default.game),void c.default.eventManager.event(u.default.updateBottomNav,{hide:!0})):(this.pass=1,this.onOver(),void console.log("通关"));this.start&&(this.progress++,this.setProgress(this.progress))},e.prototype.setProgressView=function(){var e=this;if(this.progress){var t,n=$("#dial").find(".dial");switch(n.removeClass("dial-icon-1"),n.removeClass("dial-icon-2"),n.removeClass("dial-icon-3"),this.progress){case 1:this.speed=3,t="pro_1",n.addClass("dial-icon-1");break;case 2:this.speed=2,t="pro_2",n.addClass("dial-icon-2");break;case 3:2==s.default.point?this.speed=3.5:this.speed=2,t="pro_3",n.addClass("dial-icon-3")}this.setProgressState();var o=$("#progressView");o.find("i")[0].className=t,o.css({opacity:"0",display:"flex",transform:"translate3d(0, -1.5rem, 0)"}),o.animate({opacity:1,transform:"translate3d(0, 0, 0)"},600,"ease"),this.preesTimeOut&&clearTimeout(this.preesTimeOut),this.preesTimeOut=setTimeout(function(){o.animate({opacity:0,transform:"translate3d(0, 1.5rem, 0)"},600,"ease",function(){o.css({display:"hidden"}),e.init()})},2e3)}},e.prototype.setProgressState=function(){for(var e=0;e<3;e++)e<=this.progress-1?$("#progressBox").find("i").eq(2-e).removeClass("gray"):$("#progressBox").find("i").eq(2-e).addClass("gray")},e.prototype.openRewards=function(t,n){var e=$("#rewards"),o=$("#getReward"),i=e.find("#itemList"),r=this;i.html("");for(var a="",s=0,c=t.length;s<c;s++)a+="<li data-id="+t[s].id+'>\n            <img class="lazy" src="'+(m.default.imgBase+t[s].src)+'" alt="">\n            <h3 class="font-clip">'+t[s].title+"</h3>\n        </li>";i.html(a),e.show(),e.css({opacity:0}),e.animate({opacity:1},300,null,function(){});var l,u=$("#chooseLipstick");u.find("img")[0].src="",e.on("click","li",function(){l=$(this).index(),u.find("img")[0].src=m.default.imgBase+t[l].src,u.find(".font-clip").text(t[l].title),$(this).addClass("cur").siblings().removeClass("cur"),u.addClass("fadeIn")}),e.on("click","button",function(){return f(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,h.Net.getData(h.Api.gameReward,{gameCode:n,id:t[l].id})];case 1:return e.sent(),o.find("img")[0].src=m.default.imgBase+t[l].src,o.find(".name").html(t[l].title),r.rewadObj=t[l],$("#chooseLpstick").addClass("fadeIn"),o.show(),[2]}})})});var d=this;o.on("click","button",function(){(_czc||[]).push(["_trackEvent","得奖分享","分享海报"]),d.onShareImage()})},e.prototype.closeRewards=function(){$("#rewards").off()},e.prototype.onUpdate=function(){if(this.start&&!this.playAni){switch(this.progress){case 2:this.gameAddNum++,100<this.gameAddNum&&(this.gameAddNumRandom=Math.random()<.5?1:-1,this.gameAddNum=0),this.angle+=this.speed*this.gameAddNumRandom;break;case 3:2==s.default.preset?this.angle+=(this.speed+.4*this.angles.length)*this.randomAngle:this.angle+=(this.speed+.025*this.angles.length)*this.randomAngle;break;default:this.angle+=this.speed}360<this.angle&&(this.angle=0),this.snakeNum--,this.snakeNum<0&&(this.snakeNum=0),this.dial&&this.dial.css({transform:"rotate("+this.angle+"deg) translate3d("+-this.snakeNum+"px,"+this.snakeNum+"px,0)"});for(var i=this.shootList,r=this,e=function(e){if(i[e][1]+=20,i[e][1]>i[e][2]){i[e][1]=i[e][2],r.loseAngle=a.angle,r.curLipsticks--,r.curLipsticks<=0&&(r.curLipsticks=0);var t=r.getAngle(),n=i[e][0];if(r.collision(t)){r.pass=0,r.click=!1,r.failed=!0,console.log("碰撞"),d.default.playSound(g.default.failed);var o={y:-i[e][2],angle:0};new TWEEN.Tween(o).to({y:800,angle:1800},2e3).onUpdate(function(){n.css({transform:"translate3d("+Math.abs(0)+"px,"+o.y+"px,0) rotate("+o.angle+"deg)"})}).start().onComplete(function(){r.onOver(),n.remove()})}else 3==r.progress&&2==s.default.preset&&1==r.curLipsticks?(r.pass=0,r.onOver(),d.default.playSound(g.default.failed),n.animate({transform:"translate3d(6rem,10rem,0) rotate(1800deg)"},1e3,null,function(){$(this).remove()})):(n.remove(),r.dialAddLipstick(t),r.hitSnake(),d.default.playSound(g.default.hit),r.curLipsticks||r.failed||(console.error("播放动画"),a.start&&!a.playAni&&r.playDropAnimation()));return r.randomAngle=Math.random()<.5?-1:1,i.splice(e,1),{value:void 0}}i[e][0].css({transform:"translate3d(0,-"+i[e][1]+"px,0) rotate(0deg)"})},a=this,t=0;t<i.length;t++){var n=e(t);if("object"==typeof n)return n.value}}},e.prototype.updateCountLabel=function(e){$("#countDown").text(e+"")},e.prototype.createCountDown=function(){var t=this;if(this.start){this.clearCountDown();var n=30;this.updateCountLabel(n),this.countDown=setTimeout(function e(){n--;n<=0&&(t.pass=0,t.onOver(),n=0);t.updateCountLabel(n);t.clearCountDown();n&&(t.countDown=setTimeout(e,1e3))},1e3)}},e.prototype.clearCountDown=function(){this.countDown&&clearTimeout(this.countDown)},e.prototype.onShareImage=function(){d.default.mergeImage({width:750,hieght:1220,images:[{src:"/res/other/poster-bg.jpg"},{src:m.default.imgBase+this.rewadObj.src,width:240,height:240,x:250,y:540},{src:s.default.avatar,width:90,height:90,x:330,y:260},{src:"/res/other/customer.jpg",width:190,height:190,x:292,y:928}],texts:[{string:s.default.userName,color:"#000",fontSize:24,x:375-24*s.default.userName.length/2,y:390},{string:"在口红姬游戏挑战中获得",color:"#EC4A57",fontSize:30,x:210,y:450},{string:this.rewadObj.title,color:"#EC4A57",fontSize:30,x:375-30*this.rewadObj.title.length/2,y:490}]}).then(function(e){$("#shareImg").show(),$("#shareImg").find("img")[0].src=e})},e.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#game").append(t),setTimeout(function(){$("#toast").remove()},600)},e.prototype.onError=function(e){if(e.data.code!=a.default._6004){if(e.data.code==a.default._6005)return e.data.code==a.default._6005?(c.default.viewManager.closeView(l.default.game),void c.default.eventManager.event(u.default.updateBottomNav,{hide:!0})):void 0;alert(e.data.mes)}},e.prototype.onRemove=function(){this.start=!1,this.click=!1,this.failed=!0,this.clearCountDown(),this.preesTimeOut&&clearTimeout(this.preesTimeOut),c.default.eventManager.event(u.default.viewScroll,!1),c.default.eventManager.event(u.default.updateGameInnerUser),this.node.off(),c.default.eventManager.event(u.default.gameInnerState,!0),c.default.eventManager.off(u.default.error,this.onError)},e}(r.default);n.default=v},{"../../common/AudioRes":2,"../../common/Config":3,"../../common/ErrorMap":4,"../../common/EventType":5,"../../common/Net":6,"../../common/UserData":7,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],35:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},p=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/EventType"),u=e("../../core/Utils"),h=e("../../common/Config"),a=e("../../common/UserData"),s=e("../../common/ErrorMap"),m=e("../../common/Net"),d=e("../../common/ViewConfig"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCloseAnimation=!0,e.gameStart=!1,e.touch=!1,e.itemList=[],e.itemId=0,e.interval=0,e.speed=0,e.lipstickSpeed=2,e.rotate=0,e.pass=0,e.currentNum=0,e.inputNum="",e.errorLen=0,e.arr=[0,1,2,3,4,5,6,7,8,9],e}return i(e,t),e.prototype.onAwake=function(){},e.prototype.onEnable=function(){return f(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy1"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功"),$("#broswerDialog1").hide()}catch(e){console.log("复制失败")}}var i,n,o,r,a,s=this;return p(this,function(e){switch(e.label){case 0:return c.default.eventManager.on(l.default.error,this,this.onError),c.default.eventManager.event(l.default.viewScroll,!0),c.default.eventManager.event(l.default.gameInnerState,!1),$(".prizePlay").hide(),this.node.on("click","#chooseColorBtn",function(){s.setWinViewState(!1),s.endDate?s.openRewards(s.endDate.list,s.endDate.gameCode):console.error("丢失结束接口的数据!")}),this.node.on("click",".closeSelf",function(){c.default.viewManager.closeView(d.default.gameNumber),c.default.eventManager.event(l.default.updateBottomNav,{hide:!0})}),this.node.on("click","#goOther",function(){window.location.href="#"}),this.node.on("click","#shareBtn",function(){(_czc||[]).push(["_trackEvent","数字游戏分享","数字分享海报"]),s.onShareImage()}),this.node.on("click","#rewardBoxBtn",function(){c.default.viewManager.openView(d.default.awardsBox),c.default.viewManager.closeView(d.default.gameNumber)}),this.node.on("click","#shareBtn2",function(){$("#shareDialogGame").show(),m.Net.getData(m.Api.roomShare,{id:s.dataSource.roomId})}),this.node.on("click","#shareDialogGame",function(){$("#shareDialogGame").hide()}),$("#keyboards").on("touchstart","i",function(e){s.onTouch(e.currentTarget.className.match(/\d/)[0]),$(e.currentTarget).css("opacity","0.4")}),$("#keyboards").on("touchend","i",function(){$(this).css("opacity","1")}),$("#startBtn").on("click",function(){$("#gameDesc").addClass("hide"),s.start()}),i=this,n=navigator.userAgent.toLowerCase(),(o=-1!=n.indexOf("micromessenger"))?[4,u.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,3];case 1:return e.sent(),[4,m.Net.getData(m.Api.wxJsdk)];case 2:r=e.sent(),wx.config({appId:r.appId,timestamp:r.timestamp,nonceStr:r.nonceStr,signature:r.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=3;case 3:return window.location.href,a=encodeURIComponent(location.origin+location.pathname+"?page=index"),$.ajax({type:"get",dataType:"json",url:m.Api.codeShare.url+"?redirect_uri="+a,xhrFields:{withCredentials:!0},success:function(e){o?wx.ready(function(){wx.onMenuShareTimeline({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialogs").hide()}}),wx.onMenuShareAppMessage({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialogs").hide()}})}):($("#shareTxt-copy1").val(e.mes.url),console.log(e.mes.url,$("#shareTxt-copy").val(e.mes.url)))}}),document.querySelector("#broswerCopyBtn1").addEventListener("click",t,!1),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),$(".shareDialogs").click(function(){$(".shareDialogs").hide()}),$("#creditDialogs .close").click(function(){$("#creditDialogs").hide(),c.default.viewManager.closeView(d.default.recharge)}),$(".inviteBtn").click(function(){if(o)return $(".shareDialogs").show(),void $("#creditDialogs").hide();$("#creditDialogs").hide(),$(".broswerDialog").show()}),[2]}})})},e.prototype.onClick=function(t){return f(this,void 0,void 0,function(){return p(this,function(e){switch(t.target.id){case"replay":this.replay()}return[2]})})},e.prototype.start=function(){return f(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return!this.dataSource||this.dataSource.sn?[3,2]:[4,m.Net.getData(m.Api.gameStart,{gid:this.dataSource.gid,roomId:this.dataSource.roomId,sign:this.dataSource.sign,apiKey:this.dataSource.apiKey})];case 1:if(!(t=e.sent()))return console.error("数据异常"),[2];this.dataSource.sn=t.sn,this.dataSource.coin=t.coin,a.default.preset=t.reStatus,e.label=2;case 2:return this.gameStart=!0,this.init(),[2]}})})},e.prototype.init=function(){this.pass=0,this.createCountDown(1500),this.setProgress(1),this.touch=!0,this.errorLen,this.inputNum="",this.currentNum=1,$("#numberBox").html("<div id=num_"+this.currentNum+"></div>")},e.prototype.over=function(){return f(this,void 0,void 0,function(){var t,n;return p(this,function(e){switch(e.label){case 0:return this.gameStart=!1,this.touch=!1,this.itemId=0,this.countDownTween&&this.countDownTween.stop(),this.dataSource?($("#loseView").find("h6").text("闯关失败"),$("#loseView").find("#replay").html("再玩一次"),[4,m.Net.getData(m.Api.gameEnd,{roomId:this.dataSource.roomId,sn:this.dataSource.sn,step:this.progress,status:this.pass?1:2})]):((t=$("#loseView")).find("h6").text(""),t.find("p").text("试玩结束"),t.show(),t.find("#replay").html("确定"),[2]);case 1:return n=e.sent(),(this.endDate=n)?(this.pass?this.setWinViewState(!0):(this.setOverViewState(!0,n.list[0]),$("#loseView").find("em").css("display","none"),parseInt(n.coin)<10&&parseInt(n.give_coin)&&$("#loseView").find("em").css("display","inline-block")),[2]):(console.error("数据异常"),confirm("数据错误，请联系客服"),c.default.viewManager.closeView(d.default.gameNumber),c.default.eventManager.event(l.default.updateBottomNav,{hide:!0}),[2])}})})},e.prototype.onTouch=function(e){this.inputNum+=e;var t=$("#num_"+this.currentNum);if(t.html(this.inputNum),t.css("z-index",10),parseInt(this.inputNum)==this.currentNum){switch(t.animate({transform:"translate3d(-300px,0,0)",opacity:.1},1e3,null,function(){t.remove()}),this.inputNum="",this.currentNum++,this.pass=0,$("#numberBox").append("<div id=num_"+this.currentNum+"></div>"),this.errorLen=0,this.progress){case 1:this.createCountDown(2e3);break;case 2:this.createCountDown(1500);break;case 3:this.createCountDown(2==a.default.preset?2e3:300)}if(100==this.currentNum?this.setProgress(2):200==this.currentNum&&this.setProgress(3),300==this.currentNum){if(2==a.default.preset)return this.gameStart=!1,this.init(),alert("数据非法，请勿使用任何作弊手段。违者追究法律责任!!!"),c.default.viewManager.closeView(d.default.gameNumber),void c.default.eventManager.event(l.default.updateBottomNav,{hide:!0});this.pass=1,this.over(),$(".progress-box").find("div").eq(3).addClass("cur").siblings().removeClass("cur")}}else this.errorLen++,this.errorLen==(this.currentNum+"").length&&this.over()},e.prototype.setProgress=function(e){if((this.progress=e)<3)$("#keyboards").html('<i class="key_1"></i><i class="key_2"></i><i class="key_3"></i><i class="key_4"></i><i class="key_5"></i><i class="key_6"></i><i class="key_7"></i><i class="key_8"></i><i class="key_9"></i><i class="key_0"></i>');else{if(!this.dataSource)return void this.over();this.arr.sort(function(e,t){return Math.random()-.5});for(var t="",n=0;n<this.arr.length;n++)t+='<i class="key_'+this.arr[n]+'"></i>';$("#keyboards").html(t)}$(".progress-box").find("div").eq(this.progress-1).addClass("cur").siblings().removeClass("cur")},e.prototype.replay=function(){return f(this,void 0,void 0,function(){var t,n;return p(this,function(e){switch(e.label){case 0:return this.dataSource?[4,m.Net.getData(m.Api.userInfo,{roomId:this.dataSource.roomId,game:1})]:[3,3];case 1:return t=e.sent(),[4,m.Net.getData(m.Api.gameStart,{gid:this.dataSource.gid,roomId:this.dataSource.roomId,sign:t.gameInfo.sign,apiKey:t.gameInfo.apiKey})];case 2:return(n=e.sent())?(a.default.preset=n.reStatus,this.dataSource={gid:this.dataSource.gid,apiKey:t.gameInfo.apiKey,sign:t.gameInfo.sign,roomId:this.dataSource.roomId,goodsId:t.gameInfo.goodsId,sn:n.sn,coin:n.coin,costCoin:this.dataSource.costCoin},this.start(),this.setOverViewState(!1),[3,4]):(console.error("数据异常"),[2]);case 3:c.default.viewManager.closeView(d.default.gameNumber),c.default.eventManager.event(l.default.updateBottomNav,{hide:!0}),e.label=4;case 4:return[2]}})})},e.prototype.createCountDown=function(e){var t=this,n={width:4.38},o=$("#countDown");this.countDownTween&&this.countDownTween.stop(),this.countDownTween=new TWEEN.Tween(n).to({width:.6},e).onUpdate(function(){o.css("width",n.width+"rem")}).start().onComplete(function(){t.over()})},e.prototype.openRewards=function(t,n){var e=$("#rewards"),o=$("#getReward"),i=e.find("#itemList"),r=this;i.html("");for(var a="",s=0,c=t.length;s<c;s++)a+="<li data-id="+t[s].id+'>\n            <img class="lazy" src="'+(h.default.imgBase+t[s].src)+'" alt="">\n            <h3 class="font-clip">'+t[s].title+"</h3>\n        </li>";i.html(a),e.show(),e.css({opacity:0}),e.animate({opacity:1},300,null,function(){});var l,u=$("#chooseLipstick");u.find("img")[0].src="",e.on("click","li",function(){l=$(this).index(),u.find("img")[0].src=h.default.imgBase+t[l].src,u.find(".font-clip").text(t[l].title),$(this).addClass("cur").siblings().removeClass("cur"),u.addClass("fadeIn")}),e.on("click","button",function(){return f(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,m.Net.getData(m.Api.gameReward,{gameCode:n,id:t[l].id})];case 1:return e.sent(),o.find("img")[0].src=h.default.imgBase+t[l].src,o.find(".name").html(t[l].title),r.rewadObj=t[l],$("#chooseLpstick").addClass("fadeIn"),o.show(),[2]}})})});var d=this;o.on("click","button",function(){d.onShareImage(),console.log("分享功能")})},e.prototype.closeRewards=function(){$("#rewards").off()},e.prototype.setWinViewState=function(e){var t=$("#winView");e?t.show():t.hide()},e.prototype.setOverViewState=function(e,t){var n=$("#loseView");if(!t&&e)return alert("服务器没有返回数据"),c.default.viewManager.closeView(d.default.gameNumber),void c.default.eventManager.event(l.default.updateBottomNav,{hide:!0});e?(n.find("p").text(t.title),n.show()):n.hide()},e.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#gameNumber").append(t),setTimeout(function(){$("#toast").remove()},600)},e.prototype.onError=function(e){if(e.data.code!=s.default._6004){if(e.data.code==s.default._6005)return e.data.code==s.default._6005?(c.default.viewManager.closeView(d.default.gameNumber),void c.default.eventManager.event(l.default.updateBottomNav,{hide:!0})):void 0;alert(e.data.mes)}},e.prototype.onShareImage=function(){u.default.mergeImage({width:750,hieght:1220,images:[{src:"/res/other/poster-bg.jpg"},{src:h.default.imgBase+this.rewadObj.src,width:240,height:240,x:250,y:540},{src:a.default.avatar,width:90,height:90,x:330,y:260},{src:"/res/other/customer.jpg",width:190,height:190,x:292,y:928}],texts:[{string:a.default.userName,color:"#000",fontSize:24,x:375-24*a.default.userName.length/2,y:390},{string:"在口红姬游戏挑战中获得",color:"#EC4A57",fontSize:30,x:210,y:450},{string:this.rewadObj.title,color:"#EC4A57",fontSize:30,x:375-30*this.rewadObj.title.length/2,y:490}]}).then(function(e){$("#shareImg").show(),$("#shareImg").find("img")[0].src=e})},e.prototype.onRemove=function(){this.gameStart=!1,this.touch=!1,this.itemId=0,this.countDownTween&&this.countDownTween.stop(),c.default.eventManager.event(l.default.viewScroll,!1),c.default.eventManager.event(l.default.updateGameInnerUser),this.node.off(),c.default.eventManager.event(l.default.gameInnerState,!0),c.default.eventManager.off(l.default.error,this.onError)},e}(r.default);n.default=g},{"../../common/Config":3,"../../common/ErrorMap":4,"../../common/EventType":5,"../../common/Net":6,"../../common/UserData":7,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],36:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),a=e("../component/Slider"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){this.slide=new a.default("#banner"),this.setLazyLoad()},t.prototype.setLazyLoad=function(){lazyload($(".lazy"))},t.prototype.onClick=function(e){console.log(e)},t}(r.default);n.default=s},{"../../core/ViewBase":14,"../component/Slider":19}],37:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},h=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),m=e("../../core/Core"),g=e("../../common/ViewConfig"),v=e("../component/Slider"),y=e("../../common/EventType"),w=e("../../common/Config"),b=e("../../common/Net"),_=e("../../core/Utils"),x=e("../../logic/component/signDialog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loading=!0,e.currentPage=0,e.pageSize=11,e.isOver=!1,e}return i(e,t),e.prototype.onCreate=function(){this.data&&(this.setBanner(),this.setBrand())},e.prototype.setBanner=function(){for(var e=this.data.bannerList,t="",n=0,o=e.length;n<o;n++)e[n].src&&(t+='<em><a href="'+e[n].link+'" lazy="'+(w.default.imgBase+e[n].src)+'"></a></em>');this.template=m.default.utils.replaceData("banner",this.template,t)},e.prototype.setBrand=function(){for(var e=this.data.themeList,t="",n=0,o=e.length;n<o;n++)t+='<a href="javascript:void(0)" data-id="'+e[n].id+'"><img class="lazy" data-src="'+(w.default.imgBase+e[n].src)+'" alt=""><em>'+e[n].title+"</em></a> ";this.template=m.default.utils.replaceData("itemList",this.template,t)},e.prototype.onEnable=function(){return p(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功"),$(".broswerDialog").hide()}catch(e){console.log("复制失败")}}var i,n,o,r,a,s,c,l,u,d,f=this;return h(this,function(e){switch(e.label){case 0:return this.slide=new v.default("#banner"),this.setLazyLoad(),m.default.eventManager.event(y.default.updateBottomNav,{type:"index"}),i=this,n=navigator.userAgent.toLowerCase(),(o=-1!=n.indexOf("micromessenger"))?[4,_.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,3];case 1:return e.sent(),[4,b.Net.getData(b.Api.wxJsdk)];case 2:r=e.sent(),wx.config({appId:r.appId,timestamp:r.timestamp,nonceStr:r.nonceStr,signature:r.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=3;case 3:return this.linkHref=encodeURIComponent(location.origin+location.pathname+"?page=index"),$("body").on("loginEvent",function(){return p(f,void 0,void 0,function(){var t,n,o;return h(this,function(e){switch(e.label){case 0:return t=this,[4,b.Net.getData(b.Api.userInfo)];case 1:return t.userInfo=e.sent(),n=isNaN(parseInt(this.userInfo.coin))?0:parseInt(this.userInfo.coin),o=parseInt(n/100),$(".rechargeBtn em").text(o),new x.default,this.shareL(),[2]}})})}),a=this,[4,b.Net.getData(b.Api.userInfo)];case 4:return a.userInfo=e.sent(),this.userInfo&&(s=isNaN(parseInt(this.userInfo.coin))?0:parseInt(this.userInfo.coin),c=parseInt(s/100),$(".rechargeBtn em").text(c),new x.default),this.node.on("click",".rechargeBtn",function(){return p(f,void 0,void 0,function(){return h(this,function(e){return this.userInfo?m.default.viewManager.openView(g.default.recharge):((_czc||[]).push(["_trackEvent","首页充值","点击登录"]),$(".loginDialog").show()),[2]})})}),$(".receiveFixed").click(function(){if(!i.userInfo)return(_czc||[]).push(["_trackEvent","免费领口红","点击登录"]),void $(".loginDialog").show();m.default.viewManager.openView(g.default.recommend)}),o?$(".buoyFixed").show():$(".buoyFixed").hide(),$(".buoyFixed").click(function(){(_czc||[]).push(["_trackEvent","领取大礼包","微信公众号"])}),"1"==window.localStorage.getItem("receiveW")&&$(".receiveFixed").hide(),l=this,d=0,[4,b.Net.getData(b.Api.roomList,{themeId:0,page:i.currentPage})];case 5:return u=e.sent(),this.setRoomList(u.list),document.querySelector(".refreshText"),document.getElementById("roomList"),$(".item-box a").forEach(function(t,e){var n=this;$(t).click(function(){return p(n,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return $("#roomList").hide(),$(t).addClass("cur").siblings().removeClass("cur"),l.themeId=$(t).data("id"),[4,b.Net.getData(b.Api.roomList,{themeId:l.themeId,page:0})];case 1:return u=e.sent(),l.loading?($(".tabLoading").show(),l.loading=!1,d=setTimeout(function(){$(".tabLoading").hide(),$("#roomList").show()},500)):(clearTimeout(d),$("#roomList").show()),l.setRoomList(u.list),[2]}})})})}),$(".shareDialog").on("touchmove",function(){event.preventDefault()}),$("#banner em").eq(0).find("a").click(function(){if($(this).attr("href","javascript:;"),!i.userInfo)return(_czc||[]).push(["_trackEvent","首页广告","点击登录"]),void $(".loginDialog").show();o?$(".shareDialog").show():($(".broswerDialog").show(),$("body,html").css({overflow:"hidden"}))}),$(".shareDialog").click(function(){$(".shareDialog").hide(),$("body,html").css({overflow:"auto"})}),this.shareL(),document.querySelector("#broswerCopyBtn").addEventListener("click",t,!1),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),this.setLazyLoad(),[2]}})})},e.prototype.shareL=function(){var t=-1!=navigator.userAgent.toLowerCase().indexOf("micromessenger");$.ajax({type:"get",dataType:"json",url:b.Api.codeShare.url+"?redirect_uri="+this.linkHref,xhrFields:{withCredentials:!0},success:function(e){t?wx.ready(function(){wx.onMenuShareTimeline({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}})}):$("#shareTxt-copy").val(e.mes.url)}})},e.prototype.setRoomList=function(e){for(var t="",n=new Date,o=n.getFullYear()+"/"+n.getMonth()+"1/"+n.getDate(),i=0,r=e.length;i<r;i++){var a=e[i].low_coin/100,s="",c="",l="",u="",d="";if(e[i].activity){s=e[i].activity,c=+new Date(s.startDate.replace(/-/g,"/")),l=+new Date(s.endDate.replace(/-/g,"/"));for(var f=0;f<s.timeInterval.length;f++)u=+new Date(o+" "+s.timeInterval[f].start),d=+new Date(o+" "+s.timeInterval[f].end)}e[i].src&&(t+='<li>\n                <a href="javascript:void(0);" class="room-info" data-id="'+e[i].id+'">\n                    <img class="lazy"  data-src="'+(e[i].activity&&c<n&&n<l&&u<n&&n<d?w.default.imgBase+s.banner:w.default.imgBase+e[i].src)+'" alt="">\n                </a>\n                <div class="item-msg">\n                    <div class="left">\n                        <h3 class="font-clip">'+(e[i].activity&&c<n&&n<l&&u<n&&n<d?s.title:e[i].title)+'</h3>\n                        <span class="flex">\n                            <em class="price f26">魅力币：'+parseInt(a)+' </em>\n                            <del class="f22">'+e[i].short_desc+'</del>\n                        </span>\n                    </div>\n                    <div class="right">\n                        <a href="javascript:void(0);" class="btn_red need-btn f26 room-info" data-id="'+e[i].id+'" >我要这支</a>\n                    </div>\n                </div>\n                <i class="absolute game-status f20 font-clip">\n                    '+e[i].player+"人游戏中\n                </i>\n            </li>")}$("#roomList").html(t),$("#roomList").on("click",".room-info",function(){location.href="#gameInner?id="+$(this).data("id")}),this.setLazyLoad()},e.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#index").append(t),setTimeout(function(){$("#toast").remove()},600)},e.prototype.setLazyLoad=function(){lazyload($(".lazy"))},e.prototype.onClick=function(e){},e.prototype.onUpdate=function(){},e.prototype.onRemove=function(){console.log("删除首页"),this.slide.clearTime(),this.slide=null,$(".loginDialog").hide()},e}(r.default);n.default=a},{"../../common/Config":3,"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14,"../../logic/component/signDialog":22,"../component/Slider":19}],38:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),a=e("../../core/Core"),s=e("../../common/ViewConfig"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){$("#goBack").on("click",function(){a.default.viewManager.openView(s.default.integral)})},t.prototype.onClick=function(e){console.log(e)},t.prototype.onRemove=function(){$("#goBack").off()},t}(r.default);n.default=c},{"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],39:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),a=e("../../core/Core"),s=e("../../common/ViewConfig"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){$("#goBack").on("click",function(){a.default.viewManager.openView(s.default.personal)}),$("#integralListBox").on("click",".integralList",function(){a.default.viewManager.openView(s.default.integralDetail)})},t.prototype.onClick=function(e){console.log(e)},t.prototype.onRemove=function(){$("#goBack").off()},t}(r.default);n.default=c},{"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],40:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),a=e("../../core/Core"),s=e("../../common/ViewConfig"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){$("#goBack").on("click",function(){a.default.viewManager.openView(s.default.myOrder)})},t}(r.default);n.default=c},{"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],41:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/Net"),d=e("../../common/Config"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var t,n;return a(this,function(e){switch(e.label){case 0:return $("#goBack").on("click",function(){c.default.viewManager.openView(l.default.personal)}),$("#orderList").on("click",".infot",function(){this.orderNum=$(this).data("sn"),location.href="#orderDetail?orderNum="+this.orderNum}),$("#orderList").on("click",".logis-btn",function(e){c.default.viewManager.openView(l.default.logistics),e.stopPropagation()}),[4,u.Net.getData(u.Api.OrderList)];case 1:return t=e.sent(),[4,u.Net.getData(u.Api.awardsBox)];case 2:return n=e.sent(),this.setOrderList(t,n),[2]}})})},t.prototype.setOrderList=function(e,t){var n="",o=[];if(0!=e.length){for(var i=0;i<e.length;i++){o.push(i);var r="";r=1==e[i].status?"确认收货":2==e[i].status?"待发货":"已发货",n+='<li>\n                    <div class="top">\n                        <p class="time">'+e[i].c_time+'</p>\n                        <p class="stat">'+r+'</p>\n                    </div>\n                    <div class="con">\n                        <div class="list">';for(var a=e[i].goodLists,s=0;s<a.length;s++)n+='<div class="infot" data-sn=\''+e[i].sn+"' data-id=\""+o[i]+'">\n                                                <div class="pic"><img src="'+(d.default.imgBase+a[s].src)+'" /></div>\n                                                <div class="info">\n                                                    <p class="t">'+a[s].goods_title+"</p>\n                                                </div>\n                                            </div>";n+='</div>\n                        <div class="bottom">\n                            <span>共计'+e[i].goodLists.length+"件商品</span>\n                        </div>\n                    </div>\n                </li>"}$("#orderList").html(n)}else{$("#orderList").html('<div class="pageNull">\n                     <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                     <p class="txt">亲，您暂无订单哦</p>\n                 </div>')}},t.prototype.onClick=function(e){console.log(e)},t}(s.default);n.default=f},{"../../common/Config":3,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],42:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},_=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../core/ViewBase"),x=e("../../core/Core"),k=e("../../common/ViewConfig"),C=e("../../core/Utils"),D=e("../../common/Net"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功"),$("#broswerDialog").hide()}catch(e){console.log("复制失败")}}var i,n,o,r,a,s,c,l,u,d,f,p,h,m,g,v,y,w,b;return _(this,function(e){switch(e.label){case 0:return $("#goBack").on("click",function(){x.default.viewManager.openView(k.default.personal)}),i=this,n=navigator.userAgent.toLowerCase(),o=-1!=n.indexOf("micromessenger"),$(".shareDialog").on("touchmove",function(){event.preventDefault()}),$(".Invite").click(function(){(_czc||[]).push(["_trackEvent","我的邀请","点击邀请"]),o?$(".shareDialog").show():($(".broswerDialog").show(),$("body,html").css({overflow:"hidden"}))}),$(".shareDialog").click(function(){$(".shareDialog").hide(),$("body,html").css({overflow:"auto"})}),o?[4,C.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,3];case 1:return e.sent(),[4,D.Net.getData(D.Api.wxJsdk)];case 2:r=e.sent(),wx.config({appId:r.appId,timestamp:r.timestamp,nonceStr:r.nonceStr,signature:r.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=3;case 3:return window.location.href,a=encodeURIComponent(location.origin+location.pathname+"?page=index"),$.ajax({type:"get",dataType:"json",url:D.Api.codeShare.url+"?redirect_uri="+a,xhrFields:{withCredentials:!0},success:function(e){o?wx.ready(function(){wx.onMenuShareTimeline({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}})}):$("#shareTxt-copy").val(e.mes.url)}}),document.querySelector("#broswerCopyBtn").addEventListener("click",t,!1),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),s=this,c=parseFloat(window.document.documentElement.style["font-size"]),setInterval(function(){var e=$("#shareImg").height()-6.1*c;$("#qrcode").css("top",e+"px")},1e3),[4,C.default.ajax({url:"/src/qrcode.min.js",dataType:"script"})];case 4:return e.sent(),$(".Poster").click(function(){(_czc||[]).push(["_trackEvent","我的分享邀请","点击生成海报图片"]),$.ajax({type:"get",dataType:"json",url:D.Api.codeShare.url+"?redirect_uri="+a,xhrFields:{withCredentials:!0},success:function(e){s.qrode=new QRCode(document.getElementById("qrcode"),{text:e.mes.url,width:3.1*c,height:3.1*c,colorDark:"#000000",colorLight:"#ffffff"});var t=new Image,n=(s.qrode._oDrawing._elImage,$("canvas")[0].toDataURL("image/png"));t.src=n,t.onload=function(){s.picImg=t.src,C.default.mergeImage({width:750,hieght:1219,images:[{src:"/res/other/getPrize.jpg"},{src:s.picImg,width:310,height:310,x:221,y:610}]}).then(function(e){$("#shareImg").show(),$("#shareImg").find(".picc")[0].src=e})}}})}),$(".share-img .icon").click(function(){$("#shareImg").hide()}),[4,D.Net.getData(D.Api.userPromote)];case 5:return l=e.sent(),u=l.reg.count,d=parseInt(l.reg.coin)/100,f=parseInt(d),$("#mycoin1 .red").text(f),$("#mycoin1 .money2 em").text(u),p=l.sign.count,h=u-p,m=parseInt(l.sign.coin)/100,g=parseInt(m),$("#mycoin2 .red").eq(0).text(g),$("#mycoin2 .txt1 i").eq(0).text(p),$("#mycoin2 .txt2 i").eq(0).text(h),v=l.play.count,y=u-v,w=parseInt(l.play.coin)/100,b=parseInt(w),$("#mycoin3 .red").eq(0).text(b),$("#mycoin3 .txt1 i").eq(0).text(v),$("#mycoin3 .txt2 i").eq(0).text(y),[2]}})})},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#myShare").append(t),setTimeout(function(){$("#toast").remove()},600)},t.prototype.onClick=function(e){console.log(e)},t}(a.default);n.default=s},{"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],43:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/Net"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var t,n,o=this;return a(this,function(e){switch(e.label){case 0:return $("#goBack").on("click",function(){c.default.viewManager.openView(l.default.personal)}),[4,u.Net.getData(u.Api.signature)];case 1:return t=e.sent(),n=t.list.sort(function(e,t){return e.id-t.id}),this.getSignList(n,t.dayList),this,$(".sinBtn").click(function(){return r(o,void 0,void 0,function(){var t,n,o;return a(this,function(e){switch(e.label){case 0:return[4,u.Net.getData(u.Api.signature,{action:1})];case 1:return t=e.sent(),n=t.goodsInfo,t&&(o=' <div class="mask"></div>\n                            <div class="signSucess">\n                                    <p class="tips">恭喜您</p>\n                                    <div class="monGet">\n                                    <span class="'+(-1<n.title.indexOf("积分")?"icon1":"icon")+'"></span>\n                                    <span class="num">'+n.title+'</span>\n                                </div>\n                                <div class="okayBtn">确定</div>\n                            </div>',$("#signDialog").html(o),$("#signDialog").find(".mask").show(),$("#signDialog").find(".signSucess").addClass("slideInDown")),[2]}})})}),$("#signDialog").on("click",".okayBtn",function(){return r(o,void 0,void 0,function(){var t,n;return a(this,function(e){switch(e.label){case 0:return $("#signDialog").find(".mask").hide(),$("#signDialog").find(".signSucess").remove(),$(".sinBtn").hide(),$(".sign-action .txt").html("已签到"),[4,u.Net.getData(u.Api.signature)];case 1:return t=e.sent(),n=t.list.sort(function(e,t){return e.id-t.id}),this.getSignList(n,t.dayList),[2]}})})}),[2]}})})},t.prototype.getSignList=function(e,t){var n,o="";0<t.length&&t[0].num&&(n=parseInt(t[0].num));for(var i=0;i<e.length;i++)o+='<li class="days-small '+(0<n?"days-disable":"")+'" data-id="'+e[i].id+'">\n                        <div class="t">第'+(i+1)+'天</div>\n                        <div class="'+(0<n?"complete":"")+'"></div>    \n                        <p class="'+(-1<e[i].title.indexOf("积分")?"jfico":"signicon")+'"></p>\n                        <p class="money">'+e[i].title+"</p>\n                    </li>",n--;$("#mySignDays").html(o),$("#mySignDays").children("li").eq(2).addClass("days-big"),$("#mySignDays").children("li").eq(6).addClass("days-big");var r=new Date,a=r.getFullYear(),s=(r.getMonth()+1).toString().replace(/^(\d)$/,"0$1"),c=r.getDate().toString().replace(/^(\d)$/,"0$1"),l=Date.parse(a+"-"+s+"-"+c);if(0==t.length)return $(".sinBtn").show(),void $(".sign-action .txt").html("未签到");for(i=0;i<t.length;i++){if(Date.parse(t[i].c_date)==l){$(".sinBtn").hide(),$(".sign-action .txt").html("已签到");break}$(".sinBtn").show(),$(".sign-action .txt").html("未签到")}},t.prototype.onClick=function(e){console.log(e)},t}(s.default);n.default=d},{"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],44:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},p=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),h=e("../../core/Core"),m=e("../../common/EventType"),g=e("../../common/ViewConfig"),v=e("../../core/Utils"),y=e("../../common/Net"),w=e("../../common/Config"),b=e("../component/Login"),a=(w.default.baseUrl,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return f(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功"),$(".broswerDialog").hide()}catch(e){console.log("复制失败")}}var i,n,o,r,a,s,c,l,u,d=this;return p(this,function(e){switch(e.label){case 0:return this.setLazyLoad(),h.default.eventManager.event(m.default.updateBottomNav,{hide:!0}),$("#goBack").on("click",function(){h.default.viewManager.openView(g.default.find),window.history.pushState(null,"","#find")}),i=this,n=navigator.userAgent.toLowerCase(),o=-1!=n.indexOf("micromessenger"),new b.default,r=this,[4,y.Net.getData(y.Api.userInfo)];case 1:return r.userInfo=e.sent(),a=v.default.getValueByUrl("id"),[4,y.Net.getData(y.Api.articleInfo,{id:a})];case 2:return s=e.sent(),this.setArticleInfo(s),this.setShopList(s.advLits),c=this,[4,y.Net.getData(y.Api.articleFav,{id:a,action:3})];case 3:return c.favNum=e.sent(),this.favNum&&1==this.favNum.collect&&$("#fav").addClass("shareCur"),o?[4,v.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,6];case 4:return e.sent(),[4,y.Net.getData(y.Api.wxJsdk)];case 5:l=e.sent(),wx.config({appId:l.appId,timestamp:l.timestamp,nonceStr:l.nonceStr,signature:l.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=6;case 6:return window.location.href,u=encodeURIComponent(location.origin+location.pathname+"?page=newsContent&id="+v.default.getValueByUrl("id")),$("body").on("loginEvent",function(){return f(d,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,y.Net.getData(y.Api.userInfo)];case 1:return e.sent(),$.ajax({type:"get",dataType:"json",url:y.Api.codeShare.url+"?redirect_uri="+u,xhrFields:{withCredentials:!0},success:function(e){o?wx.ready(function(){wx.onMenuShareTimeline({title:s.title,desc:s.desc,link:e.mes.url,imgUrl:w.default.imgBase+s.src,success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:s.title,desc:s.desc,link:e.mes.url,imgUrl:w.default.imgBase+s.src,success:function(){$(".shareDialog").hide()}})}):(console.log(e.mes.url),$(".shareTxt-copy").val(e.mes.url))}}),[2]}})})}),$.ajax({type:"get",dataType:"json",url:y.Api.codeShare.url+"?redirect_uri="+u,xhrFields:{withCredentials:!0},success:function(e){o?wx.ready(function(){wx.onMenuShareTimeline({title:s.title,desc:s.desc,link:e.mes.url,imgUrl:w.default.imgBase+s.src,success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:s.title,desc:s.desc,link:e.mes.url,imgUrl:w.default.imgBase+s.src,success:function(){$(".shareDialog").hide()}})}):(console.log(e.mes.url),$(".shareTxt-copy").val(e.mes.url))}}),document.querySelector("#broswerCopyBtn").addEventListener("click",t,!1),$("#shareA").click(function(){return f(d,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return(_czc||[]).push(["_trackEvent","分享文章","点击分享文章"]),[4,y.Net.getData(y.Api.userInfo)];case 1:return e.sent()?o?($(".shareDialog").show(),[2]):($(".broswerDialog").show(),this.node.find("#shareA"),[4,y.Net.getData(y.Api.articleShare,{id:a})]):($(".loginDialog").show(),[2]);case 2:return e.sent(),[2]}})})}),$(".shareDialog").click(function(){$(".shareDialog").hide()}),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),$("#newsC").find("img").parent().css({"text-indent":"0"}),this.setLazyLoad(),[2]}})})},t.prototype.onClick=function(t){return f(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:switch(t.target.className){case"icon collect":return[3,1]}return[3,3];case 1:return[4,y.Net.getData(y.Api.userInfo)];case 2:return e.sent()?(this.favVote(),[3,3]):($(".loginDialog").show(),[2]);case 3:return[2]}})})},t.prototype.favVote=function(){return f(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return(t=this.node.find("#fav")).hasClass("shareCur")?t.removeClass("shareCur"):t.addClass("shareCur"),t.hasClass("shareCur")?this.favId=1:this.favId=2,[4,y.Net.getData(y.Api.articleFav,{id:v.default.getValueByUrl("id"),action:this.favId})];case 1:return e.sent(),[2]}})})},t.prototype.setArticleInfo=function(e){var t="",n=""+e.advCount;$(".newsT").text(e.title),t+=' <div class="content">'+e.content+"</div>",$("#num").text(n),$("#newsC").html(t)},t.prototype.setShopList=function(e){for(var t="",n=0;n<e.length;n++)t+='<li>\n                    <a href="javascript:void(0);">\n                        <img class="lazy" src="" alt="" data-src="'+(w.default.imgBase+e[n].src)+'">\n                    </a>\n                    <div class="right relative">\n                        <h3>'+e[n].title+'</h3>\n                        <em class="price absolute">市场参考价格：￥'+e[n].short_title+'</em>\n                        <a href="'+e[n].link+'" class="btn_red get-btn absolute">'+e[n].button_title+"</a>\n                    </div>\n                </li>";if($("#shopList").html(t),e.length){var o=$(".newsdialCon");$("#num");$("#shopMore").click(function(){(_czc||[]).push(["_trackEvent","商品列表","点击商品"]),$(".newsDialog .mask").addClass("fadeIn"),o.addClass("fadeInUp"),o.show(),$(".newsDialog .mask").show(),$("body,html").css({overflow:"hidden"})}),$(".newsDialog .mask").on("touchmove",function(){event.preventDefault()}),$(".newsdialCon").on("touchmove",function(){}),$("#toggle").click(function(){$(".newsDialog .mask").removeClass("fadeIn"),o.removeClass("fadeInUp"),$(".newsDialog .mask").hide(),o.hide(),$("body,html").css({overflow:"inherit"})})}},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#newsContent").append(t),setTimeout(function(){$("#toast").remove()},600)},t.prototype.setLazyLoad=function(){lazyload($(".lazy"))},t.prototype.onRemove=function(){h.default.eventManager.event(m.default.viewScroll,!1),$(".loginDialog").hide(),$("#goBack").off()},t}(r.default));n.default=a},{"../../common/Config":3,"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14,"../component/Login":18}],45:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},s=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/Net"),p=e("../../common/Config"),d=e("../../core/Utils"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var r,t,n,o,i,a;return s(this,function(e){switch(e.label){case 0:return r=this,$("#goBack").on("click",function(){c.default.viewManager.openView(l.default.myOrder),window.history.pushState(null,"","#myOrder")}),[4,d.default.ajax({url:"/src/address.js",dataType:"script"})];case 1:return e.sent(),[4,u.Net.getData(u.Api.awardsBox)];case 2:return t=e.sent(),n=d.default.getValueByUrl("orderNum"),[4,u.Net.getData(u.Api.OrderInfo,{sn:n})];case 3:for(o=e.sent(),this.orderList(o.addressInfo,o.orderInfo),this.awardsGood(t,o.goodLists,o.logisticsLists,o.orderInfo),i=function(i){$(".copy")[i].onclick=function(){var e=$(".txtClipboard")[i],t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&r.errorDialog("复制成功")}catch(e){console.log("复制失败")}}},a=0;a<$(".copy").length;a++)i(a);return $(".custIcon").click(function(){c.default.viewManager.openView(l.default.customer)}),[2]}})})},t.prototype.orderList=function(n,e){var t="",o=[],i=[],r=[];city.forEach(function(e,t){e.id==n.province&&(o=e.name,e.hasOwnProperty("child")&&e.child.forEach(function(e,t){e.id==n.city&&(i=e.name,e.hasOwnProperty("child")&&e.child.forEach(function(e,t){e.id==n.area&&(r=e.name)}))}))}),t+='<div class="info">\n                        <div class="name">'+n.name+"<span>"+n.phone+'</span></div>\n                        <div class="address">'+o+i+r+n.address+"</div>\n                    </div>",$(".orderaddress").append(t)},t.prototype.awardsGood=function(e,t,n,o){for(var i="",r=[],a=0;a<t.length;a++)r.push(parseInt(t[a].goods_id));r.sort(function(e,t){return t-e});for(var s={},c=0;c<t.length;c++){s[u=t[c].user_order_logistics_id?t[c].user_order_logistics_id:0]||(s[u]=[]),s[u].push(t[c])}for(var l in 0==n.length&&(n=[{id:0,logistics_sn:"",logistics_type:""}]),n){var u,d=s[u=n[l].id];for(var f in console.log(n[l]),d)i+=' <ul class="comList"><li class="item">\n                            <div class="imgbox">\n                                <img src="'+(p.default.imgBase+d[f].src)+'" alt="">\n                            </div>\n                            <div class="infoword">\n                                <p>'+d[f].goods_title+'</p>\n                            </div>\n                        </li></ul>\n                        <dl class="distrInformTion"><dd class="tip"  style="display:'+(2==o.status?"none":"block")+'">\n                                物流编号：\n                                <span class="num txtClipboard" >'+n[l].logistics_sn+'</span>\n                                <span class="fz copy" >复制</span>\n                            </dd></dl>'}i+=' <dl class="distrInformTion">\n                    <dd class="tip">\n                    订单编号：\n                    <span id="txt" class="wl">'+o.sn+'</span>\n                </dd>\n                <dd class="tip">\n                    订单时间：\n                    <span class="wl">'+o.c_time+"</span>  \n                </dd></dl>",$(".orderBody").append(i)},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#orderDetail").append(t),setTimeout(function(){$("#toast").remove()},500)},t.prototype.onClick=function(e){},t}(a.default);n.default=f},{"../../common/Config":3,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],46:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},h=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),m=e("../../core/Core"),g=e("../../common/ViewConfig"),a=e("../../common/EventType"),v=e("../../common/Net"),y=e("../../common/Config"),w=e("../../core/Utils"),b=e("../component/Cdialog"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orderList={},e}return i(e,t),e.prototype.onAwake=function(){m.default.eventManager.on(a.default.error,this,this.onError)},e.prototype.onEnable=function(){return p(this,void 0,void 0,function(){var n,t,o,i,r,a,s,c,l,u,d,f=this;return h(this,function(e){switch(e.label){case 0:return $("#goBack").on("click",function(){m.default.viewManager.openView(g.default.awardsBox)}),n=this,[4,v.Net.getData(v.Api.awardsBox)];case 1:return t=e.sent(),this.awardsGood(t),this.orderList=this.dataSource,[4,v.Net.getData(v.Api.addressList)];case 2:return o=e.sent(),[4,w.default.ajax({url:"/src/address.js",dataType:"script"})];case 3:if(e.sent(),i="",0==o.length&&(i+='<p class="locaNull">请新建收货地址确保商品顺利到达</p>',$("#orderAddress .info").html(i)),this.orderList.hasOwnProperty("cityAssress"))i+='<div class="name">'+this.orderList.name+"<span>"+this.orderList.phone+'</span></div>\n                    <div class="address" data-id="'+this.orderList.id+'"> <span style="display:'+(1==this.orderList.flag?"inline":"none")+'">默认</span> '+(this.orderList.cityAssress+this.orderList.address)+"</div>",$("#orderAddress .info").html(i);else for(r=[],a=[],s=[],c=function(n){if(city.forEach(function(e,t){e.id==o[n].province&&(r.push(e.name),e.hasOwnProperty("child")&&e.child.forEach(function(e,t){e.id==o[n].city&&(a.push(e.name),e.hasOwnProperty("child")?e.child.forEach(function(e,t){e.id==o[n].area&&s.push(e.name)}):s.push(""))}))}),1==o[n].flag)i+='<div class="name">'+o[n].name+"<span>"+o[n].phone+'</span></div>\n                         <div class="address" data-id="'+o[n].id+"\" data-province='"+o[n].province+"' data-city='"+o[n].city+"' data-area='"+o[n].area+"'><span>默认</span>"+r[n]+a[n]+s[n]+o[n].address+"</div>",$("#orderAddress .info").html(i);else{var e='<div class="name">'+o[0].name+"<span>"+o[0].phone+'</span></div>\n                                <div class="address" data-id="'+o[0].id+"\" data-province='"+o[0].province+"' data-city='"+o[0].city+"' data-area='"+o[0].area+"'>"+r[0]+a[0]+s[0]+o[0].address+"</div>";$("#orderAddress .info").html(e)}},u=0;u<o.length;u++)c(u);if($("#orderAddress").click(function(){m.default.viewManager.openView(g.default.addresses,{orderlistId:n.orderId.orderlistId})}),l="",this.orderList.hasOwnProperty("cityAssress")){for(u=0;u<t.length;u++)-1!=this.orderId.orderlistId.indexOf(parseInt(t[u].id))&&(l+='<li class="item" data-id="'+t[u].id+'">\n                                <div class="imgbox">\n                                    <img src="'+(y.default.imgBase+t[u].src)+'">\n                                </div>\n                                <div class="infoword">\n                                    <p>'+t[u].title+"</p>\n                                </div>\n                            </li>");$("#orderList").html(l)}return d=!0,$(".orderbtn").click(function(){return p(f,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return d?[4,v.Net.getData(v.Api.goodsOrder,{idList:n.orderId.orderlistId.join(","),addressId:$(".address").data("id")})]:[3,2];case 1:return(t=e.sent())&&(n.orderNum=t.sn,$("#orderDialog").show(),new b.default("#orderDialog",{title:"订单提交成功",content:"订单提交成功，请耐心等待发货",cssTip:"center",cssPadding:"0.3rem 0 0",cssLine:"1",buttons:{"确定":function(){location.href="#orderDetail?orderNum="+n.orderNum}}})),d=!1,[3,3];case 2:n.errorDialog("您点击过快，过会儿再来哦~"),setTimeout(function(){$("#toast").remove()},600),e.label=3;case 3:return setTimeout(function(){d=!0},3e3),[2]}})})}),[2]}})})},e.prototype.awardsGood=function(e){this.orderId=this.dataSource;for(var t="",n=0;n<e.length;n++)-1!=this.orderId.orderlistId.indexOf(parseInt(e[n].id))&&(t+='<li class="item" data-id="'+e[n].id+'">\n                            <div class="imgbox">\n                                <img src="'+(y.default.imgBase+e[n].src)+'">\n                            </div>\n                            <div class="infoword">\n                                <p>'+e[n].title+"</p>\n                            </div>\n                        </li>");$("#orderList").html(t)},e.prototype.onError=function(e){switch(e.api){case v.Api.goodsOrder.name:$("#orderDialog").show(),new b.default("#orderDialog",{title:"订单提交失败",content:e.data.mes,cssTip:"center",cssPadding:"0.3rem 0 0",cssLine:"1",buttons:{"再逛逛":function(){m.default.viewManager.openView(g.default.awardsBox)}}})}},e.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#orderSubmit").append(t)},e.prototype.onClick=function(e){console.log(e)},e}(r.default);n.default=s},{"../../common/Config":3,"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14,"../component/Cdialog":16}],47:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/EventType"),u=e("../../common/ViewConfig"),d=e("../../common/Net"),f=e("../component/Login"),p=e("../component/personInfo"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var t,n=this;return a(this,function(e){switch(e.label){case 0:return c.default.eventManager.event(l.default.updateBottomNav,{type:"personal"}),$("#goBack").on("click",function(){c.default.preView?history.go(-1):window.location.href="#index"}),this.bindClick(),new f.default,$("body").on("loginEvent",function(){return r(n,void 0,void 0,function(){return a(this,function(e){return new p.default,[2]})})}),[4,d.Net.getData(d.Api.userInfo,{userMes:1,userGoods:1})];case 1:return(t=e.sent())?(this.setUserInfo(t),0<parseInt(t.userMesCount)?$("#email em").show():$("#email em").hide(),0<parseInt(t.userGoodsCount)?$("#awardsBox em").show():$("#awardsBox em").hide(),$(".adBanner").click(function(){location.href="/#gameInner?id=6"}),swan.webView.getEnv(function(e){1==e.smartprogram?$("#serviceBtn").hide():$("#serviceBtn").show()})):$(".loginDialog").show(),[2]}})})},t.prototype.setUserInfo=function(e){var t,n=e.coin/100,o=parseInt(n);t='<div class="headport">\n                <img src="'+e.avatar+'" alt="">\n            </div>\n            <div class="tit">\n                <h3>'+e.nick_name+"</h3>\n                <p>我的魅力币："+o+"</p>\n                <p>我的积分数："+e.point+"</p>\n            </div>",$("#headportbox").html(t)},t.prototype.bindClick=function(){var e=this;$("#userBtnList").on("click","li",function(){e.onClickEvent(this)}),$("#userBtnList2").on("click","li",function(){e.onClickEvent(this)}),$("#rechargeBtn").on("click",function(){e.onClickEvent(this)})},t.prototype.onClickEvent=function(e){var t;switch(e.id){case"mySign":t=u.default.mySign;break;case"rechargeBtn":t=u.default.recharge;break;case"integralBtn":this.errorDialog("暂未开放，敬请期待~"),this.errorTip();break;case"awardsBox":t=u.default.awardsBox;break;case"email":t=u.default.email;break;case"orderBtn":t=u.default.myOrder;break;case"collectBtn":t=u.default.collect;break;case"shareBtn":t=u.default.myShare;break;case"addressBtn":t=u.default.addresses;break;case"serviceBtn":t=u.default.customer;break;default:return}t?c.default.viewManager.openView(t):console.error("界面丢失")},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#personal").append(t)},t.prototype.errorTip=function(){setTimeout(function(){$("#toast").remove()},800)},t.prototype.onRemove=function(){$("#userBtnList").off(),$(".loginDialog").hide(),$("#goBack").off()},t}(s.default);n.default=h},{"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14,"../component/Login":18,"../component/personInfo":21}],48:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},p=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),h=e("../../core/Core"),m=e("../../common/ViewConfig"),g=e("../../common/EventType"),v=e("../../common/Net"),a=e("../../common/Config"),y=e("../../core/Utils"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return f(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&a.errorDialog("复制成功"),$(".broswerDialog").hide()}catch(e){console.log("复制失败")}}var n,o,i,r,a,s,c,l,u,d=this;return p(this,function(e){switch(e.label){case 0:return this.setLazyLoad(),this.node.off(),this.node.on("click",".closeSelf",function(){console.log(h.default.currentView),h.default.viewManager.closeView(m.default.recharge),$("#root").find("#creditDialog").hide(),$("#root").find("#creditDialogs").hide(),"gameInner"!=h.default.currentView.name&&h.default.eventManager.event(g.default.updateBottomNav,{hide:!1})}),this.node.on("click","#recordBtn",function(){h.default.viewManager.openView(m.default.rechargeRecord)}),n=this,[4,v.Net.getData(v.Api.userInfo,{firstRecharge:1})];case 1:return n.userInfoMy=e.sent(),o=isNaN(parseInt(this.userInfoMy.coin))?0:parseInt(this.userInfoMy.coin),i=parseInt(o/100),$(".wordList dd").eq(0).find("span").text(i),[4,v.Net.getData(v.Api.recharge)];case 2:return r=e.sent(),this.setRecharge(r.rechargeList,r.goodsList),this.setBanner(r.bannerList),this.node.on("click","#rechargeLink",function(){(_czc||[]).push(["_trackEvent","他人代充","分享充值"]),c?$(".shareDialog").show():($(".broswerDialog").show(),$("body,html").css({overflow:"hidden"}))}),$(".shareDialog").on("touchmove",function(){event.preventDefault()}),$(".shareDialog").click(function(){$("body,html").css({overflow:"auto"}),$(".shareDialog").hide()}),a=this,s=navigator.userAgent.toLowerCase(),(c=-1!=s.indexOf("micromessenger"))?[4,y.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,5];case 3:return e.sent(),[4,v.Net.getData(v.Api.wxJsdk)];case 4:l=e.sent(),wx.config({appId:l.appId,timestamp:l.timestamp,nonceStr:l.nonceStr,signature:l.signature,jsApiList:["chooseWXPay","onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=5;case 5:return u=encodeURIComponent(location.origin+location.pathname+"?page=shareFriendRecharge&to_uid="+this.userInfoMy.uid),$.ajax({type:"get",dataType:"json",url:v.Api.codeShare.url+"?redirect_uri="+u,xhrFields:{withCredentials:!0},success:function(e){c?wx.ready(function(){wx.onMenuShareTimeline({title:"小哥哥，我要这只口红，给我买！",desc:"点唇以红，口脂凝香，口红之于女人的意义，不仅仅是恋人用来证明“我爱你”，更是女人的灵魂，最有魅力的彩妆，做精致的女人，即使天塌下来，还有口红呢！",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/share1.jpg",success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:"小哥哥，我要这只口红，给我买！",desc:"点唇以红，口脂凝香，口红之于女人的意义，不仅仅是恋人用来证明“我爱你”，更是女人的灵魂，最有魅力的彩妆，做精致的女人，即使天塌下来，还有口红呢！",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/share1.jpg",success:function(){$(".shareDialog").hide()}})}):$("#shareTxt-copy").val(e.mes.url)}}),document.querySelector("#broswerCopyBtn").addEventListener("click",t,!1),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),$("#rechargeList li").click(function(o){return f(d,void 0,void 0,function(){var t,n;return p(this,function(e){switch(e.label){case 0:return(_czc||[]).push(["_trackEvent","充值弹窗","点击选中充值"]),$(o.currentTarget).addClass("cur").siblings().removeClass("cur"),this.amount=$(o.currentTarget).data("price"),t=a.amount.toFixed(2),c?($(".rechargeDialog").hide(),[4,v.Net.getData(v.Api.userPay,{amount:this.amount,toUid:this.userInfoMy.uid,type:42})]):[3,2];case 1:return n=e.sent(),wx.chooseWXPay({timestamp:n.timestamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.sign,success:function(e){location.href="#rechargeSuccess"},cancel:function(e){h.default.viewManager.openView(m.default.recharge)}}),[2];case 2:return $(".rechargeDialog").show(),$(".price .total").text(t),[2]}})})}),c?(a.paymType=42,[2]):(a.paymType=44,$(".payBtn-action").click(function(e){return f(d,void 0,void 0,function(){var t,n,o,i;return p(this,function(e){switch(e.label){case 0:return[4,v.Net.getData(v.Api.userPay,{amount:this.amount,toUid:this.userInfoMy.uid,type:this.paymType})];case 1:switch(t=e.sent(),this.paymType){case 42:wx.chooseWXPay({timestamp:t.timestamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.sign,success:function(e){h.default.viewManager.openView(m.default.rechargeSuccess)},cancel:function(e){h.default.viewManager.openView(m.default.recharge)}});break;case 44:for(i in n=$("<form action='https://mapi.alipay.com/gateway.do' method='get'></form>"),o="",t)o+='<input type="hidden" value="'+t[i]+'" name="'+i+'"  />';n.append(o),$(document.body).append(n),n.submit(),n.remove();break;case 45:console.log(3333333333333)}return[2]}})})}),$(".close").click(function(){$(".rechargeDialog").hide()}),this.setLazyLoad(),h.default.eventManager.event(g.default.viewScroll,!0),[2])}})})},t.prototype.setBanner=function(e){if(!(e.length<=0)){var t='<img class="lazy" src="'+(a.default.imgBase+e[0].src)+'" >';$("#rechargeBanner .banerL").html(t)}},t.prototype.setRecharge=function(e,t){for(var n="",o=0;o<e.length;o++){var i=e[o].goodsList;if(1==this.userInfoMy.firstRecharge)for(var r=0;r<i.length;r++)152==i[r].attribute_id&&(n+='<li class="item firstCZ " data-price="'+e[o].amount/100+'">\n                                <a href="javascript:void(0)">\n                                    <p class="price">\n                                        <span class="mon"><em>¥</em>'+e[o].amount/100+'</span>\n                                        <span class="num">'+i[r].title+'</span>\n                                    </p>\n                                   <p class="txtTo">共'+(parseInt(e[o].money_coin)/100+i[r].goods_company/100*i[r].num)+"魅力币</p>\n                            </a></li>");else for(r=0;r<i.length;r++)154==i[r].attribute_id&&(n+='<li class="item hzCz" data-price="'+e[o].amount/100+'">\n                                <a href="javascript:void(0)">\n                                <p class="price">\n                                    <span class="mon"><em>¥</em>'+e[o].amount/100+'</span>\n                                    <span class="num">'+i[r].title+'</span>\n                                </p>\n                                 <p class="txtTo">共'+(parseInt(e[o].money_coin)/100+i[r].goods_company/100*i[r].num)+"魅力币</p>\n                            </a></li>")}$("#rechargeList").html(n)},t.prototype.payWx=function(e){e.platform},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#recharge").append(t),setTimeout(function(){$("#toast").remove()},600)},t.prototype.setLazyLoad=function(){lazyload($(".lazy"))},t.prototype.onClick=function(e){},t.prototype.onRemove=function(){h.default.eventManager.event(g.default.viewScroll,!1)},t}(r.default);n.default=s},{"../../common/Config":3,"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],49:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/Net"),d=e("../../common/EventType"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var t,n,o,i;return a(this,function(e){switch(e.label){case 0:return this.node.css({zIndex:1001}),this.node.on("click",".closeSelf",function(){c.default.viewManager.closeView(l.default.rechargeRecord),"gameInner"!=c.default.currentView.name&&c.default.eventManager.event(d.default.updateBottomNav,{hide:!1})}),[4,u.Net.getData(u.Api.rechargeRecord)];case 1:for(t=e.sent(),n="",0==t.length&&('<div class="pageNull">\n                    <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                    <p class="txt">您暂无充值记录哦</p>\n                </div>',$(".recRcodList").append('<div class="pageNull">\n                    <img src="http://s-h5.52kouhong.com/upload/2018/ci/Null.png" />\n                    <p class="txt">您暂无充值记录哦</p>\n                </div>')),o=0;o<t.length;o++)i=t[o].amount/100,console.log(t[o].avatar),n+='<li class="item"><a href="javascript:void(0);">\n                        <img src="'+t[o].avatar+'" alt="">\n                        <div class="wordInfo">\n                            <div class="namebox">\n                                <div class="name font-clip">'+t[o].nick_name+'</div>\n                                <div class="tip">'+(t[o].from_uid==t[o].to_uid?"自己充值":"TA为你充值")+'</div>\n                            </div>\n                            <div class="timebox">\n                                <div class="time">'+t[o].n_time+'</div>\n                                <div class="tip">'+parseInt(i)+"魅力币</div>\n                            </div>\n                        </div></a></li>";return $("#recRbox").html(n),c.default.eventManager.event(d.default.viewScroll,!0),[2]}})})},t.prototype.onClick=function(e){console.log(e)},t.prototype.onRemove=function(){c.default.eventManager.event(d.default.viewScroll,!1)},t}(s.default);n.default=f},{"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],50:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),a=e("../../core/Core"),s=e("../../common/ViewConfig"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){$(".goIndex").on("click",function(){location.href="#",a.default.viewManager.closeView(s.default.recharge)})},t.prototype.onClick=function(e){console.log(e)},t}(r.default);n.default=c},{"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}],51:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},h=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),m=e("../../core/Core"),g=e("../../common/ViewConfig"),v=e("../../common/EventType"),y=e("../../common/Net"),w=e("../../core/Utils"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return p(this,void 0,void 0,function(){function t(){var e=document.querySelector("#shareTxt-copy"),t=document.createRange();t.selectNode(e);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(t);try{var o=document.execCommand("copy");n.removeAllRanges(),o&&i.errorDialog("复制成功"),$(".broswerDialog").hide()}catch(e){console.log("复制失败")}}var i,n,o,r,a,s,c,l,u,d,f=this;return h(this,function(e){switch(e.label){case 0:return this.node.on("click",".closeSelf",function(){return p(f,void 0,void 0,function(){var t,n,o;return h(this,function(e){switch(e.label){case 0:return m.default.viewManager.closeView(g.default.recommend),$("#root").find("#creditDialog").hide(),$("#root").find("#creditDialogs").hide(),"gameInner"!=m.default.currentView.name&&m.default.eventManager.event(v.default.updateBottomNav,{hide:!1}),t=this,[4,y.Net.getData(y.Api.userInfo)];case 1:return t.userInfo=e.sent(),n=isNaN(parseInt(this.userInfo.coin))?0:parseInt(this.userInfo.coin),o=parseInt(n/100),$(".rechargeBtn em").text(o),[2]}})})}),n=i=this,[4,y.Net.getData(y.Api.userInfo)];case 1:return n.userInfo=e.sent(),o=navigator.userAgent.toLowerCase(),r=-1!=o.indexOf("micromessenger"),[4,y.Net.getData(y.Api.promoteGift)];case 2:return a=e.sent(),s=+new Date,c=this.userInfo.c_time<"2019-01-21 20:00:00"?"2019-01-21 20:00:00":this.userInfo.c_time,l=+new Date(c.replace(/-/g,"/")),this.giftReceive(a),this.dateReduce(),setInterval(function(){i.dateReduce()},1e3),$(".reagainBtn").click(function(o){return p(f,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return m.default.eventManager.on(v.default.error,this,this.onError),t=$(o.currentTarget).data("id"),"29"==$(o.currentTarget).data("id")&&(s-l)/864e5<=15?(m.default.viewManager.openView(g.default.recommendTips),[2]):[4,y.Net.getData(y.Api.userPromoteGift,{goodsId:t})];case 1:return e.sent()?(this.errorDialog("领取成功"),[4,y.Net.getData(y.Api.promoteGift)]):[3,3];case 2:n=e.sent(),this.giftReceive(n),$(o.currentTarget).addClass("recDisabled"),e.label=3;case 3:return[2]}})})}),r?[4,w.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,5];case 3:return e.sent(),[4,y.Net.getData(y.Api.wxJsdk)];case 4:u=e.sent(),wx.config({appId:u.appId,timestamp:u.timestamp,nonceStr:u.nonceStr,signature:u.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=5;case 5:return d=encodeURIComponent(location.origin+location.pathname+"?page=index"),$.ajax({type:"get",dataType:"json",url:y.Api.codeShare.url+"?redirect_uri="+d,xhrFields:{withCredentials:!0},success:function(e){r?wx.ready(function(){wx.onMenuShareTimeline({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}})}):$("#shareTxt-copy").val(e.mes.url)}}),$(".inviteBtn").click(function(){(_czc||[]).push(["_trackEvent","邀请领奖","朋友圈"]),r?$(".shareDialog").show():$(".broswerDialog").show()}),document.querySelector("#broswerCopyBtn").addEventListener("click",t,!1),$(".shareDialog").click(function(){$(".shareDialog").hide()}),$(".broswerDialog .close").click(function(){$(".broswerDialog").hide()}),m.default.eventManager.event(v.default.viewScroll,!0),[2]}})})},t.prototype.onError=function(e){switch(e.api){case y.Api.userPromoteGift.name:this.errorDialog(e.data.mes)}},t.prototype.giftReceive=function(d){return p(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c,l,u;return h(this,function(e){for(t="",n=window.localStorage,o=["30魅力币","70魅力币","120魅力币","MAC口红"],i=[3,10,20,40],a=!(r=["26","27","28","29"]),s=+new Date,c=this.userInfo.c_time<"2019-01-21 20:00:00"?"2019-01-21 20:00:00":this.userInfo.c_time,l=+new Date(c.replace(/-/g,"/")),u=0;u<o.length;u++)t+='<li class="'+(d.count>=i[u]?"complete":"")+'" >\n                    <p class="'+(u<3?"reico":"reprize")+' "></p>\n                    <div class="info">\n                        <p class="money">'+o[u]+'</p>\n                    </div>\n                    <p class="per">成功推荐<span>'+d.count+'</span>位好友 <em style="display:'+(d.count>=i[u]?"none":"inline")+'">,还需推荐<span>'+(i[u]-d.count)+'</span>位好友</em></p>\n                    <div data-id="'+r[u]+'" class="reagainBtn '+(-1<d.goods_id.indexOf(r[u])||15<(s-l)/864e5?"recDisabled":"recbtn")+'" style="display:'+(d.count>=i[u]?"block":"none")+'" >',-1<d.goods_id.indexOf(r[u])?t+="已领取</div></li>":t+=15<(s-l)/864e5?"已超时</div></li>":"领取</div></li>",(s-l)/864e5<=15?a=!0:d.count>=i[u]&&-1==d.goods_id.indexOf(r[u])&&(a=!1);return 0==a&&n.setItem("receiveW","1"),$("#recommendList").html(t),[2]})})},t.prototype.dateReduce=function(){var e=new Date,t=this.userInfo.c_time<"2019-01-21 20:00:00"?"2019-01-21 20:00:00":this.userInfo.c_time,n=new Date(t.replace(/-/g,"/")),o=this.DateAdd("d ",15,n).getTime()-e.getTime(),i=0,r=0,a=0,s=0;0<o&&(i=Math.floor(o/1e3/60/60/24),r=Math.floor(o/1e3/60/60%24),a=Math.floor(o/1e3/60%60),s=Math.floor(o/1e3%60)),a<=9&&(a="0"+a),s<=9&&(s="0"+s),$(".timeTotal span").html(i+"天"+r+"时"+a+"分"+s+"秒"),0==--o&&clearInterval()},t.prototype.DateAdd=function(e,t,n){switch(e){case"y ":return n.setFullYear(n.getFullYear()+t),n;case"q ":return n.setMonth(n.getMonth()+3*t),n;case"m ":return n.setMonth(n.getMonth()+t),n;case"w ":return n.setDate(n.getDate()+7*t),n;case"d ":return n.setDate(n.getDate()+t),n;case"h ":return n.setHours(n.getHours()+t),n;case"m ":return n.setMinutes(n.getMinutes()+t),n;case"s ":return n.setSeconds(n.getSeconds()+t),n;default:return n.setDate(n.getDate()+t),n}},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#recommend").append(t),setTimeout(function(){$("#toast").remove()},600)},t.prototype.onClick=function(e){console.log(e)},t.prototype.onRemove=function(){m.default.eventManager.event(v.default.viewScroll,!1),m.default.eventManager.off(v.default.error,this.onError)},t}(r.default);n.default=a},{"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],52:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},l=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),u=e("../../core/Core"),d=e("../../common/ViewConfig"),f=e("../../common/EventType"),p=e("../../common/Net"),h=e("../../core/Utils"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.page=0,e.lists=[],e}return i(e,t),e.prototype.onEnable=function(){return c(this,void 0,void 0,function(){var t,n,o,i,r,a,s=this;return l(this,function(e){switch(e.label){case 0:return this.node.on("click",".closeSelf",function(){return c(s,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return u.default.viewManager.closeView(d.default.recommendTips),$("#root").find("#creditDialog").hide(),$("#root").find("#creditDialogs").hide(),"gameInner"!=u.default.currentView.name&&u.default.eventManager.event(f.default.updateBottomNav,{hide:!1}),t=this,[4,p.Net.getData(p.Api.promoteGift)];case 1:return t.promoteGift=e.sent(),[2]}})})}),t=this,[4,p.Net.getData(p.Api.userInfo)];case 1:return t.userInfo=e.sent(),[4,p.Net.getData(p.Api.userPromoteList,{page:this.page})];case 2:return n=e.sent(),this.promoteList(n.list),this.processValue(n.value),o=navigator.userAgent.toLowerCase(),(i=-1!=o.indexOf("micromessenger"))?[4,h.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,5];case 3:return e.sent(),[4,p.Net.getData(p.Api.wxJsdk)];case 4:r=e.sent(),wx.config({appId:r.appId,timestamp:r.timestamp,nonceStr:r.nonceStr,signature:r.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.label=5;case 5:return a=encodeURIComponent(location.origin+location.pathname+"?page=index"),$.ajax({type:"get",dataType:"json",url:p.Api.codeShare.url+"?redirect_uri="+a,xhrFields:{withCredentials:!0},success:function(e){i?wx.ready(function(){wx.onMenuShareTimeline({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}}),wx.onMenuShareAppMessage({title:"我正在口红姬薅羊毛，来晚哭一年",desc:"每天送出万支大牌正品口红，小姐姐不容错过",link:e.mes.url,imgUrl:"http://s-h5.52kouhong.com/upload/2018/ci/TOM_FORD.jpg",success:function(){$(".shareDialog").hide()}})}):$(".shareTxt-copy").val(e.mes.url)}}),$(".recommendTop").on("click",".helpBtn",function(t){return c(s,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return 1200<=n.value?[4,p.Net.getData(p.Api.userPromoteGift,{goodsId:"29"})]:[3,4];case 1:return e.sent()?(this.errorDialog("领取成功,前往奖品柜领取哦~"),[4,p.Net.getData(p.Api.promoteGift)]):[3,3];case 2:e.sent(),$(t.currentTarget).text("已领取"),e.label=3;case 3:return[2];case 4:if(i)return $(".shareDialog").show(),[2];$(".broswerDialog").show(),e.label=5;case 5:return[2]}})})}),document.getElementById("recommendMiddle"),[2]}})})},e.prototype.processValue=function(o){return c(this,void 0,void 0,function(){var t,n;return l(this,function(e){switch(e.label){case 0:return[4,p.Net.getData(p.Api.promoteGift)];case 1:return t=e.sent(),"",n=' <p class="title '+(1200<=o?"titRed":"")+'"> '+(1200<=o?"太棒了，您现在可以领口红了":"<span>恭喜您已获得兑换口红资格</span>组织好友为你填满活跃度即可兑换哦")+'</p>\n                    <div class="processTop">\n                        <div class="processLine">\n                            <div class="processCur" style="width:'+(1200<=o?"100":o/1200*100)+"%;display:"+(0<o?"block":"none")+'"></div>\n                        </div>\n                        <div class="processtxtTip">\n                            <p class="begin">开始</p>\n                            <div class="middle" style="left:'+(1200<=o?"90":o/1200*100-8)+"%;display:"+(0<o?"block":"none")+'""><span>'+(1200<=o?"1200":o)+'</span></div>\n                            <p class="end">1200</p>\n                        </div> <div class="helpBtn">',-1<t.goods_id.indexOf("29")&&(n+="已领取</div></div> "),n+=1200<=o?"立即领取</div></div>":"请好友帮忙</div></div>",$(".recommendTop").html(n),[2]}})})},e.prototype.promoteList=function(e){var t="",n="";if(0!=e.length){for(var o=0;o<e.length;o++)-1<e[o].goods_id.indexOf("30")?n="进行签到":-1<e[o].goods_id.indexOf("31")?n="进行充值":-1<e[o].goods_id.indexOf("32")?n="发起闯关":-1<e[o].goods_id.indexOf("33")&&(n="为您打开活跃度礼包"),t+='<li>\n                        <p class="lf">'+e[o].login_name+n+'</p>\n                        <p class="rl">贡献'+e[o].value+"点活跃度</p>\n                    </li>";$("#recommendMiddle").html(t)}else{$(".recommendMiddle").html('<p class="null">暂无帮忙记录哦~</p>')}},e.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#recommendTips").append(t),setTimeout(function(){$("#toast").remove()},600)},e.prototype.onClick=function(e){console.log(e)},e}(r.default);n.default=a},{"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],53:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},c=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),l=e("../../core/Core"),u=e("../../common/ViewConfig"),d=e("../../common/Config"),f=e("../../core/Utils"),p=e("../../common/Net"),h=e("../component/Cdialog"),a=e("../../common/EventType"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onAwake=function(){l.default.eventManager.on(a.default.error,this,this.onError)},t.prototype.onEnable=function(){return s(this,void 0,void 0,function(){var t,n;return c(this,function(e){switch(e.label){case 0:return this.node.on("click",".closeSelf",function(){l.default.viewManager.openView(u.default.personal),l.default.viewManager.closeView(u.default.rewardPage),window.history.pushState(null,"","#personal"),"gameInner"!=l.default.currentView.name&&l.default.eventManager.event(a.default.updateBottomNav,{hide:!1})}),t=f.default.getValueByUrl("gameCode"),[4,p.Net.getData(p.Api.gameAgain,{gameCode:t})];case 1:return n=e.sent(),this.rewardsList(n.list),l.default.eventManager.event(a.default.viewScroll,!0),[2]}})})},t.prototype.rewardsList=function(t){for(var e=$("#rewards"),n=($("#getReward"),""),o=0,i=t.length;o<i;o++)n+="<li data-id="+t[o].id+'>\n                    <img class="lazy" src="'+(d.default.imgBase+t[o].src)+'" alt="">\n                    <h3 class="font-clip">'+t[o].title+"</h3>\n                </li>";$("#itemList").html(n);var r,a=$("#chooseLipstick");a.find("img")[0].src="",e.on("click","li",function(){r=$(this).index(),a.find("img")[0].src=d.default.imgBase+t[r].src,a.find(".font-clip").text(t[r].title),$(this).addClass("cur").siblings().removeClass("cur"),a.addClass("fadeIn")}),e.on("click","button",function(){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,p.Net.getData(p.Api.gameReward,{gameCode:f.default.getValueByUrl("gameCode"),id:t[r].id})];case 1:return e.sent()&&($("#orderDialog").show(),new h.default("#orderDialog",{title:"领取成功",content:"请您去奖品柜查看哦~",cssTip:"center",cssPadding:"0.3rem 0 0",cssLine:"1",buttons:{"确定":function(){l.default.viewManager.openView(u.default.awardsBox)}}})),[2]}})})})},t.prototype.onError=function(e){switch(e.api){case p.Api.gameReward.name:$("#orderDialog").show(),new h.default("#orderDialog",{title:"领取失败",content:e.data.mes,cssTip:"center",cssPadding:"0.3rem 0 0",cssLine:"1",buttons:{"再逛逛":function(){location.href="#"}}})}},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                '+e+"\n             </div>";$("#rewardPage").append(t)},t.prototype.onRemove=function(){l.default.eventManager.event(a.default.viewScroll,!1)},t.prototype.onClick=function(e){console.log(e)},t}(r.default);n.default=m},{"../../common/Config":3,"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14,"../component/Cdialog":16}],54:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},c=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../core/ViewBase"),l=e("../../core/Core"),u=e("../../common/ViewConfig"),d=e("../../common/Net"),f=e("../../core/Utils"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return s(this,void 0,void 0,function(){var n,t,i,o,r,a=this;return c(this,function(e){switch(e.label){case 0:return this.setLazyLoad(),$("#goBack").on("click",function(){window.location.href="#"}),$("body").on("loginEvent",function(){return s(a,void 0,void 0,function(){var t,n,o;return c(this,function(e){switch(e.label){case 0:return t=this,[4,d.Net.getData(d.Api.userInfo,{firstRecharge:1})];case 1:return t.myUserINfo=e.sent(),n=this,[4,d.Net.getData(d.Api.userInfoBase,{uid:f.default.getValueByUrl("to_uid"),firstRecharge:1})];case 2:return n.userInfoTo=e.sent(),this.userInfo(this.userInfoTo),this.userInfoTo.uid==this.myUserINfo.uid?(location.href=location.origin+location.pathname+"?page=recharge",[2]):[4,d.Net.getData(d.Api.recharge)];case 3:return o=e.sent(),this.setRecharge(o.rechargeList),[2]}})})}),n=this,t=navigator.userAgent.toLowerCase(),i=-1!=t.indexOf("micromessenger"),$("#friendRecharges").on("click","li",function(){$(this).addClass("cur").siblings().removeClass("cur"),n.amount=$(this).data("price")}),i?[4,f.default.ajax({url:"/src/jweixin-1.0.0.js",dataType:"script"})]:[3,3];case 1:return e.sent(),[4,d.Net.getData(d.Api.wxJsdk)];case 2:o=e.sent(),wx.config({appId:o.appId,timestamp:o.timestamp,nonceStr:o.nonceStr,signature:o.signature,jsApiList:["chooseWXPay"]}),e.label=3;case 3:return $("#helpRecharge").click(function(e){return s(a,void 0,void 0,function(){var t,n,o;return c(this,function(e){switch(e.label){case 0:return t=this.amount.toFixed(2),n=f.default.getValueByUrl("to_uid")?f.default.getValueByUrl("to_uid"):this.myUserINfo.uid,i?($(".rechargeDialog").hide(),[4,d.Net.getData(d.Api.userPay,{amount:this.amount,toUid:n,type:42})]):[3,2];case 1:return o=e.sent(),wx.chooseWXPay({timestamp:o.timestamp,nonceStr:o.nonceStr,package:o.package,signType:o.signType,paySign:o.sign,success:function(e){l.default.viewManager.openView(u.default.rechargeSuccess)},cancel:function(e){l.default.viewManager.openView(u.default.recharge)}}),[2];case 2:return $(".rechargeDialog").show(),$(".price .total").text(t),[2]}})})}),$(".payList li").click(function(){var e=$(this).find(".selIco"),t=$(this).siblings("li").find(".selIco");e.hasClass("cur")?e.removeClass("cur"):(t.hasClass("cur")&&t.removeClass("cur"),e.addClass("cur")),n.paymType=i?42:$(this).data("type")}),$(".payBtn-action").click(function(e){return s(a,void 0,void 0,function(){var t,n,o,i,r;return c(this,function(e){switch(e.label){case 0:return t=f.default.getValueByUrl("to_uid")?f.default.getValueByUrl("to_uid"):this.myUserINfo.uid,[4,d.Net.getData(d.Api.userPay,{amount:this.amount,toUid:t,type:this.paymType})];case 1:switch(n=e.sent(),this.paymType){case 42:wx.chooseWXPay({timestamp:n.timestamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.sign,success:function(e){l.default.viewManager.openView(u.default.rechargeSuccess)},cancel:function(e){l.default.viewManager.openView(u.default.recharge)}});break;case 44:for(r in o=$("<form action='https://mapi.alipay.com/gateway.do' method='get'></form>"),i="",n)i+='<input type="hidden" value="'+n[r]+'" name="'+r+'"  />';o.append(i),$(document.body).append(o),o.submit(),o.remove();break;case 45:console.log(3333333333333)}return[2]}})})}),$(".close").click(function(){$(".rechargeDialog").hide()}),this.setLazyLoad(),r=this,[4,d.Net.getData(d.Api.userInfo,{firstRecharge:1})];case 4:return r.myUserINfo=e.sent(),this.myUserINfo?($("body").triggerHandler("loginEvent"),[2]):($(".loginDialog").show(),$(".closeLogin").hide(),$(".loginDialog .mask").css("background","#fff"),[2])}})})},t.prototype.userInfo=function(e){var t=' <div class="advanter"><img src="'+e.avatar+'" alt=""></div>\n                    <div class="talkTip">\n                        即将为<'+e.nick_name+">充值，请选择充值金额\n                    </div>";$(".rechargeBanner .top").html(t)},t.prototype.setRecharge=function(e){for(var t="",n=0;n<e.length;n++){var o=e[n].goodsList;if(1==this.userInfoTo.firstRecharge){for(var i=0;i<o.length;i++)if(151==o[i].attribute_id){var r=e[n].money_coin/100+e[n].money_coin/100*(o[i].goods_company/100)*o[i].num;t+='<li class="item firstCZ" data-price="'+e[n].amount/100+'">\n                                <a href="javascript:void(0)">\n                                <p class="price">\n                                    <span class="mon"><em>¥</em>'+e[n].amount/100+'</span>\n                                    <span class="num">'+o[i].title+'</span>\n                                </p>\n                                <p class="txtTo">共'+parseInt(r)+"魅力币</p>\n                            </a></li>"}}else for(i=0;i<o.length;i++)153==o[i].attribute_id&&(t+='<li class="item hzCz" data-price="'+e[n].amount/100+'">\n                                <a href="javascript:void(0)">\n                                <p class="price">\n                                    <span class="mon"><em>¥</em>'+e[n].amount/100+'</span>\n                                    <span class="num">'+o[i].title+'</span>\n                                </p>\n                                <p class="txtTo">共'+(parseInt(e[n].money_coin)/100+o[i].goods_company/100*o[i].num)+"魅力币</p>\n                            </a></li>")}$("#friendRecharges").html(t)},t.prototype.setLazyLoad=function(){lazyload($(".lazy"))},t.prototype.onClick=function(e){console.log(e)},t}(r.default);n.default=a},{"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/Utils":13,"../../core/ViewBase":14}],55:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/EventType"),u=e("../../common/ViewConfig"),d=e("../../common/Net"),f=e("../component/CityPicker"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onAwake=function(){c.default.eventManager.on(l.default.error,this,this.onError)},t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var n,t,o=this;return a(this,function(e){return this.cityPicke=new f.default,n=this.dataSource,this.updateVal(n),this.orderId=[],this.orderId=n.hasOwnProperty("orderlistId")?n.orderlistId:[],$("#goBack").on("click",function(){c.default.viewManager.openView(u.default.addresses,{orderlistId:o.orderId})}),t=this.cityPicke,$("#addressSel").click(function(){document.activeElement.blur(),$("input[readonly='readonly']").blur(),t.show()}),$("#saveAddr").on("click",function(){return r(o,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return(t={id:n.id,name:"",phone:"",province:"",city:"",area:"",address:"",flag:""}).name=$("#addressName").val(),t.phone=$("#addressPhone").val(),t.province=$("#addressLocation").data("province"),t.city=$("#addressLocation").data("city"),t.area=$("#addressLocation").data("area"),t.address=$("#addressArea").val(),t.flag=1==$("#switch").prop("checked")?"1":"2",[4,d.Net.getData(d.Api.addressUpdate,t)];case 1:return e.sent()&&c.default.viewManager.openView(u.default.addresses,{orderlistId:this.orderId}),[2]}})})}),$("#deleteAdd").on("click",function(){$(".sureDialog").show()}),$(".cancle").on("click",function(){$(".sureDialog").hide()}),$(".del").on("click",function(){return r(o,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,d.Net.getData(d.Api.addressDel,{id:n.id})];case 1:return e.sent(),$(".sureDialog").hide(),c.default.viewManager.openView(u.default.addresses),[2]}})})}),[2]})})},t.prototype.updateVal=function(e){1==e.flag&&$("#switch").prop("checked",!0);var t=' <div class=\'cell\'>\n                       <p class="name"><span>收货人</span></p>\n                       <p class=\'content\'><input id="addressName" type="text" placeholder="请使用真实姓名" value="'+e.name+'"></p>\n                   </div>\n                   <div class=\'cell\'>\n                       <p class="name"><span>手机号码</span></p>\n                       <p class=\'content\'><input id="addressPhone" type="text" placeholder="请填写" value="'+e.phone+'"></p>\n                   </div>\n                   <div class=\'cell\' id="addressSel">\n                       <p class="name"><span>省市区</span></p>\n                       <p class=\'content\'><input id="addressLocation" data-province="'+e.province+"\" data-city='"+e.city+"' data-area='"+e.area+'\' type="text" placeholder="请填写" value="'+e.cityAssress+'"></p>\n                   </div>\n                   <div class=\'cell2\'>\n                       <p class="content-wrapper">\n                           <textarea  id="addressArea" name="" id="" cols="30" rows="4" placeholder="请填写详细地址" value="">'+e.address+"</textarea>\n                       </p>\n                   </div>  ";$("#updateAddr").html(t)},t.prototype.onError=function(e){switch(e.api){case d.Api.addressUpdate.name:this.errorDialog(e.data.mes),this.errorTip()}},t.prototype.errorDialog=function(e){var t='<div id="toast" class="toast" >\n                    '+e+"\n                 </div>";$("#updateAddress").append(t)},t.prototype.errorTip=function(){setTimeout(function(){$("#toast").remove()},1e3)},t.prototype.onClick=function(e){console.log(e)},t}(s.default);n.default=p},{"../../common/EventType":5,"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14,"../component/CityPicker":17}],56:[function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(r,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,o)}i((c=c.apply(r,a||[])).next())})},a=this&&this.__generator||function(n,o){var i,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],r=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../core/ViewBase"),c=e("../../core/Core"),l=e("../../common/ViewConfig"),u=e("../../common/Net"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){return r(this,void 0,void 0,function(){var t,n;return a(this,function(e){switch(e.label){case 0:return $("#goBack").on("click",function(){c.default.viewManager.openView(l.default.email),window.history.pushState(null,"","#email")}),t=this.dataSource.id,[4,u.Net.getData(u.Api.messageList)];case 1:return n=e.sent(),[4,u.Net.getData(u.Api.newsInfo,{id:t})];case 2:return e.sent(),this.newsInfo(n.list),[2]}})})},t.prototype.newsInfo=function(e){for(var t="",n=0;n<e.length;n++)e[n].id==this.dataSource.id&&(t='<div class="newst">\n                            <p class="t">'+e[n].title+'</p>\n                            <p class="time">'+e[n].c_time+'</p>\n                            <p class="from">'+(0==e[n].type?"系统":"客服")+'</p>\n                        </div>\n                        <div class="newsc">\n                           <p> '+e[n].mes+"</p>\n                        </div>"),$("#newsInfos").html(t)},t.prototype.onClick=function(e){console.log(e)},t}(s.default);n.default=d},{"../../common/Net":6,"../../common/ViewConfig":8,"../../core/Core":10,"../../core/ViewBase":14}]},{},[1]);